<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='å‰è¨€ Kubernetes Service https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/ åœ¨å¹³æ—¶å¼€å‘æˆ–è€…æœ¬åœ°ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æœåŠ¡ç±»å‹å¯èƒ½æ˜¯ï¼šClusterIP, NodePortã€‚ ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸¤ç§é‡è¦çš„æœåŠ¡ç±»å‹ï¼š LoadB'>
<meta name="keywords" content="Loadbalancer, Ingress, Kubernetes Service, Kubernetes, MetalLB"><title>Loadbalancerä¸Ingress</title>

<link rel='canonical' href='https://lizonglingo.github.io/p/loadbalancer%E4%B8%8Eingress/'>

<link rel="stylesheet" href="/scss/style.min.811a71d93d8df406268b1c66d015cd3f2252f454f25ac10a683e6f7b5ad9d92d.css"><meta property='og:title' content='Loadbalancerä¸Ingress'>
<meta property='og:description' content='å‰è¨€ Kubernetes Service https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/ åœ¨å¹³æ—¶å¼€å‘æˆ–è€…æœ¬åœ°ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æœåŠ¡ç±»å‹å¯èƒ½æ˜¯ï¼šClusterIP, NodePortã€‚ ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸¤ç§é‡è¦çš„æœåŠ¡ç±»å‹ï¼š LoadB'>
<meta property='og:url' content='https://lizonglingo.github.io/p/loadbalancer%E4%B8%8Eingress/'>
<meta property='og:site_name' content='fmt.Println(&#34;Li Duo&#34;)'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Kubernetes' /><meta property='article:tag' content='äº‘åŸç”Ÿ' /><meta property='article:tag' content='ä¸­é—´ä»¶' /><meta property='article:published_time' content='2023-01-26T17:51:33&#43;08:00'/><meta property='article:modified_time' content='2023-01-26T23:03:33&#43;08:00'/><meta property='og:image' content='https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126181500003.png' />
<meta name="twitter:title" content="Loadbalancerä¸Ingress">
<meta name="twitter:description" content="å‰è¨€ Kubernetes Service https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/ åœ¨å¹³æ—¶å¼€å‘æˆ–è€…æœ¬åœ°ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æœåŠ¡ç±»å‹å¯èƒ½æ˜¯ï¼šClusterIP, NodePortã€‚ ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸¤ç§é‡è¦çš„æœåŠ¡ç±»å‹ï¼š LoadB"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126181500003.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-SPJXNM3WZ6"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-SPJXNM3WZ6', { 'anonymize_ip': false });
}
</script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/1634453613659.jpeg" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">ğŸ‘‹</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">fmt.Println(&#34;Li Duo&#34;)</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/lizonglingo'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
            
        
                
                <li >
                    <a href='/' >
                        
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                        
                        <span>ä¸»é¡µ</span>
                    </a>
                </li>
                
            
        
        
            
        
                
                <li >
                    <a href='/%E5%85%B3%E4%BA%8E/' >
                        
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                        
                        <span>å…³äº</span>
                    </a>
                </li>
                
            
        
        
            
        
                
                <li >
                    <a href='/archives/' >
                        
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                        
                        <span>å½’æ¡£</span>
                    </a>
                </li>
                
            
        
        
            
        
                
                <li >
                    <a href='/%E9%93%BE%E6%8E%A5/' >
                        
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                        
                        <span>é“¾æ¥</span>
                    </a>
                </li>
                
            
        
        
            
        
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                <form action="/search/" class="search-form widget" >
        <p>
            <label>æœç´¢</label>
            <input name="keyword" required placeholder="è¾“å…¥å…³é”®è¯..." />
        
            <button title="æœç´¢">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
            
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#kubernetes-service">Kubernetes Service</a></li>
    <li><a href="#ingress">Ingress</a></li>
  </ul>

  <ul>
    <li><a href="#metallb">MetalLB</a>
      <ul>
        <li><a href="#æ¦‚å¿µ">æ¦‚å¿µ</a></li>
        <li><a href="#å®‰è£…-metallb">å®‰è£… MetalLB</a></li>
        <li><a href="#é…ç½®äºŒå±‚æ¨¡å¼ä¸‹çš„-loadbalancer">é…ç½®äºŒå±‚æ¨¡å¼ä¸‹çš„ LoadBalancer</a></li>
        <li><a href="#åˆ›å»º-loadbalancer-ç±»å‹çš„æœåŠ¡">åˆ›å»º LoadBalancer ç±»å‹çš„æœåŠ¡</a></li>
      </ul>
    </li>
    <li><a href="#å°ç»“">å°ç»“</a></li>
  </ul>

  <ul>
    <li><a href="#ingress-nginx">Ingress-Nginx</a>
      <ul>
        <li><a href="#å®‰è£…-ingress-nginx">å®‰è£… Ingress-Nginx</a></li>
        <li><a href="#é…ç½®-ingress-æš´éœ²-tekton-dashboard-æœåŠ¡">é…ç½® Ingress æš´éœ² Tekton Dashboard æœåŠ¡</a></li>
        <li><a href="#å…³äºé…ç½®-host">å…³äºé…ç½® host</a></li>
      </ul>
    </li>
    <li><a href="#å°ç»“-1">å°ç»“</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/loadbalancer%E4%B8%8Eingress/">
                
                    <img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126181500003.png" loading="lazy" alt="Featured image of post Loadbalancerä¸Ingress" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/kubernetes/" >
                Kubernetes
            </a>
        
            <a href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/" >
                äº‘åŸç”Ÿ
            </a>
        
            <a href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/" >
                ä¸­é—´ä»¶
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/loadbalancer%E4%B8%8Eingress/">Loadbalancerä¸Ingress</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 26, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 7 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="å‰è¨€">å‰è¨€</h1>
<h2 id="kubernetes-service">Kubernetes Service</h2>
<blockquote>
<p><a class="link" href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/"  target="_blank" rel="noopener"
    >https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/</a></p>
</blockquote>
<p>åœ¨å¹³æ—¶å¼€å‘æˆ–è€…æœ¬åœ°ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æœåŠ¡ç±»å‹å¯èƒ½æ˜¯ï¼š<code>ClusterIP</code>, <code>NodePort</code>ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸¤ç§é‡è¦çš„æœåŠ¡ç±»å‹ï¼š</p>
<ul>
<li><code>LoadBalancer</code>ï¼šä½¿ç”¨äº‘æä¾›å•†çš„è´Ÿè½½å‡è¡¡å™¨å‘å¤–éƒ¨æš´éœ²æœåŠ¡ã€‚ å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨å¯ä»¥å°†æµé‡è·¯ç”±åˆ°è‡ªåŠ¨åˆ›å»ºçš„ <code>NodePort</code> æœåŠ¡å’Œ <code>ClusterIP</code> æœåŠ¡ä¸Šã€‚</li>
<li><code>ExternalName</code>: é€šè¿‡è¿”å› <code>CNAME</code> è®°å½•å’Œå¯¹åº”å€¼ï¼Œå¯ä»¥å°†æœåŠ¡æ˜ å°„åˆ° <code>externalName</code> å­—æ®µçš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œ<code>foo.bar.example.com</code>ï¼‰ã€‚ æ— éœ€åˆ›å»ºä»»ä½•ç±»å‹ä»£ç†ã€‚</li>
</ul>
<p>è¿™é‡Œå…ˆç®€å•è¯´ä¸€ä¸‹ <code>ExternalName</code> çš„ä½¿ç”¨æƒ…æ™¯ï¼Œå¦‚ä¸‹é¢çš„ yaml å®šä¹‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">backend-service</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">ExternalName</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">externalName</span>: <span style="color:#ae81ff">backend-service.example.svc.cluster.local</span>
</span></span></code></pre></div><p>ä¸å…¶ä»– Service ç±»å‹ä¸åŒï¼Œ<code>ExternalName</code> ç±»å‹ä¸é€šè¿‡ Pod é€‰æ‹©å™¨å…³è” Pod ï¼Œè€Œæ˜¯å°† Service å’Œå¦å¤–ä¸€ä¸ªåŸŸåå…³è”èµ·æ¥ã€‚è¿™ç§æ–¹å¼å¯ä»¥å®ç°ï¼š</p>
<ul>
<li>é…ç½®æœåŠ¡ç®¡ç†å¦ä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„æœåŠ¡ï¼Œå±è”½æœåŠ¡åœ¨ä¸åŒå‘½åç©ºé—´çš„è°ƒç”¨å·®å¼‚ï¼Œä½¿å¾—ä¸¤ä¸ªæœåŠ¡çœ‹èµ·æ¥åƒæ˜¯åœ¨åŒä¸€ä¸ªå‘½åç©ºé—´ä¸‹ï¼›</li>
<li>é€šè¿‡ Service åç§°çš„æ–¹å¼è¯·æ±‚å¤–éƒ¨æœåŠ¡æ—¶ï¼Œä¾‹å¦‚è¯·æ±‚åœ¨é›†ç¾¤å¤–çš„æ•°æ®åº“æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•</li>
<li>å°†å¾®æœåŠ¡ä¾èµ–çš„ä¸­é—´ä»¶åœ°å€é…ç½®ä¸º <code>ExternalName</code> ç±»å‹ï¼Œè¿›ä¸€æ­¥æŠŠæœåŠ¡å’Œä½¿ç”¨çš„ä¸­é—´ä»¶è§£è€¦ï¼ˆå°†ä¸€äº›ä¸­é—´ä»¶æœåŠ¡åœ°å€ç›´æ¥ç”¨é›†ç¾¤è®¿é—®åœ°å€è¡¨ç¤ºï¼‰ï¼Œåœ¨å®é™…éƒ¨ç½²çš„æ—¶å€™é€šè¿‡ <code>ExternalName</code> æ–¹å¼è®©å¾®æœåŠ¡è®¿é—®å…¶ä»–ä¸­é—´ä»¶</li>
<li>&hellip;</li>
</ul>
<h2 id="ingress">Ingress</h2>
<blockquote>
<p>&ldquo;Ingress æ˜¯å¯¹é›†ç¾¤ä¸­æœåŠ¡çš„å¤–éƒ¨è®¿é—®è¿›è¡Œç®¡ç†çš„ API å¯¹è±¡ï¼Œå…¸å‹çš„è®¿é—®æ–¹å¼æ˜¯ HTTPã€‚å¯ä»¥æä¾›è´Ÿè½½å‡è¡¡ã€SSL ç»ˆç»“å’ŒåŸºäºåç§°çš„è™šæ‹Ÿæ‰˜ç®¡ã€‚&rdquo;</p>
<p><a class="link" href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/"  target="_blank" rel="noopener"
    >https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/</a></p>
</blockquote>
<p>åœ¨ç”Ÿäº§ä¸­ï¼ŒIngress å¸¸ä¸ LoadBalancer é…åˆä½¿ç”¨ã€‚</p>
<h1 id="loadbalancer">Loadbalancer</h1>
<p>Loadbalancer é€šè¿‡è´Ÿè½½å‡è¡¡å™¨æ¥æš´éœ² Serviceï¼Œé€šè¿‡äº‘å‚å•†çš„è´Ÿè½½å‡è¡¡å™¨æä¾›çš„å¤–ç½‘ IP æ¥è¿›è¡Œè®¿é—®ä¸šåŠ¡ã€‚</p>
<p>è€Œåœ¨å®é™…çš„ä¸šåŠ¡ä¸­ï¼Œé€šå¸¸å°† Loadbalancer ä¸ Ingress ç»“åˆä½¿ç”¨ã€‚åŸå› æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>äº‘å‚å•†çš„ Loadbalancer æä¾›çš„å…¬ç½‘ IP å’Œæµé‡å¸¦å®½æ˜¯æ”¶è´¹çš„ï¼Œé€šå¸¸æœ‰å¤šä¸ªæœåŠ¡éœ€è¦æš´éœ²ï¼Œæ²¡æœ‰å¿…è¦åˆ›å»ºå¤šä¸ª Loadbalancer ï¼Œè¿™ä¼šå¢åŠ å¼€é”€ã€‚</li>
<li>æ¯ä¸€ä¸ªæœåŠ¡éƒ½ç”¨ä¸€ä¸ªå…¬ç½‘ IP ä¹Ÿä¸çµæ´»ã€‚</li>
<li>è€Œ Ingress é€šè¿‡é…ç½®åŸŸåå’Œè·¯å¾„è§„åˆ™ï¼Œåœ¨ä¸€ä¸ªå…¥å£ç»Ÿä¸€æ¥æ”¶å¤–éƒ¨è¯·æ±‚ï¼Œèƒ½å¤Ÿè½¬å‘åˆ°ä¸åŒçš„é›†ç¾¤å†…éƒ¨æœåŠ¡ä¸­ï¼Œå¯ä»¥çµæ´»å®ç°é›†ç¾¤æœåŠ¡çš„æš´éœ²ã€‚</li>
</ol>
<p>Loadbalancer ç±»å‹çš„æœåŠ¡å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">my-service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">MyApp</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">port</span>: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">9376</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">clusterIP</span>: <span style="color:#ae81ff">10.0.171.239</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">LoadBalancer</span>
</span></span></code></pre></div><p>å®ƒç”± <code>type: LoadBalancer</code> ç¡®å®šã€‚LoadBalancer çš„å…·ä½“å®ç°ä¾èµ–äº‘å‚å•†ã€‚</p>
<p>é‚£ä¹ˆåœ¨æœ¬åœ°é›†ç¾¤æƒ³ä½¿ç”¨ LoadBalancer æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“ LoadBalancer éƒ½æ˜¯ä½œä¸ºäº‘å‚å•† IaaS å¹³å°çš„ä¸€éƒ¨åˆ†å®ç°çš„ï¼Œå¦‚æœæˆ‘ä»¬çš„é›†ç¾¤æ²¡æœ‰ä½¿ç”¨è¿™äº›å…¬æœ‰äº‘ï¼ŒLoadBalancers ç±»å‹çš„æœåŠ¡å°±ä¼šæ— é™å¤„äº <code>Pending</code> çŠ¶æ€ã€‚</p>
<p><a class="link" href="https://metallb.universe.tf/"  target="_blank" rel="noopener"
    >MetalLB</a> è§£å†³çš„å°±æ˜¯è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 id="metallb">MetalLB</h2>
<blockquote>
<p><a class="link" href="https://metallb.universe.tf/"  target="_blank" rel="noopener"
    >https://metallb.universe.tf/</a></p>
</blockquote>
<p>ç›®å‰ï¼Œå¯¹äºæœ¬åœ° Kubernetes é›†ç¾¤çš„ä¸€ç§ç§°å‘¼æ˜¯ â€œè£¸é‡‘å±é›†ç¾¤â€ï¼Œæˆ–è®¸ MetalLB å°±æ˜¯è¿™ä¸ªæ„æ€ï¼Œåœ¨è£¸é‡‘å±é›†ç¾¤ä¸Šé…ç½®æœ¬åœ°çš„ LoadBalancerã€‚å®ƒç›®å‰æ˜¯ CNCF çš„æ²™ç›’é¡¹ç›®ï¼Œä½¿ç”¨æ ‡å‡†è·¯ç”±åè®®å®ç°è£¸é‡‘å±é›†ç¾¤çš„ load-balancerã€‚</p>
<p>é€šè¿‡ MetalLBï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°é›†ç¾¤æˆ–è€…ç§æœ‰äº‘ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ° LoadBalancer çš„èƒ½åŠ›ã€‚</p>
<h3 id="æ¦‚å¿µ">æ¦‚å¿µ</h3>
<blockquote>
<p><a class="link" href="https://metallb.universe.tf/concepts/"  target="_blank" rel="noopener"
    >https://metallb.universe.tf/concepts/</a></p>
</blockquote>
<h4 id="address-allocation">Address Allocation</h4>
<p>å…¬æœ‰äº‘ä¼šä¸º LoadBalancer ç±»å‹çš„æœåŠ¡è‡ªåŠ¨åˆ†é…ä¸€ä¸ª IP åœ°å€ã€‚MetalLB ä¸èƒ½å‡­ç©ºæŠŠè¿™äº›åœ°å€åˆ›å»ºå‡ºæ¥ï¼Œ<strong>æˆ‘ä»¬éœ€è¦ä¸º MetalLB åˆ†é…ä¸€ä¸ª IP åœ°å€æ± </strong>ï¼Œè¿™é€šå¸¸å–å†³äºæˆ‘ä»¬çš„å†…ç½‘ç¯å¢ƒï¼Œä¾‹å¦‚åœ¨ 192.168.0.0/24 ä¸­åˆ†é… 192.168.0.128/26 ä½œä¸ºå¯ç”¨ IP åœ°å€æ± ã€‚è¿™äº›æœ¬åœ°åœ°å€éƒ½æ˜¯å†…ç½‘åœ°å€ï¼Œå› æ­¤éœ€è¦ç¬¦åˆ RFC 1918 è§„èŒƒã€‚</p>
<p>è¿™æ · MetalLB å°±å¯ä»¥è‡ªåŠ¨æŠŠåœ°å€æ± ä¸­çš„åœ°å€åˆ†é…ç»™æœåŠ¡ã€‚</p>
<h4 id="external-announcement">External Announcement</h4>
<p>åœ¨ LoadBalancer ç±»å‹çš„æœåŠ¡è¢«åˆ†åˆ°åœ°å€ä¹‹åï¼Œæˆ‘ä»¬å¿…é¡»è®©å†…ç½‘çš„å…¶ä»–è®¾å¤‡çŸ¥é“ï¼Œè¿™ä¸ª IP çš„å­˜åœ¨ã€‚è¿™å°±åƒæ˜¯å†…ç½‘çš„ä¸¤ä¸ªæœåŠ¡å™¨å¯ä»¥çŸ¥é“å½¼æ­¤çš„ IP ä¸€æ ·ã€‚å³ï¼š<strong>æ­¤æ—¶ï¼Œè¿™ä¸ªå†…ç½‘æœåŠ¡å™¨çš„ï¼Œk8sé›†ç¾¤ä¸­çš„ï¼ŒService å¯¹å¤–çš„ç½‘ç»œåº”è¯¥è¡¨ç°ä¸ºï¼Œä¸€ä¸ªå†…ç½‘æœåŠ¡å™¨åœ¨ç½‘ç»œä¸­çš„ä½ç½®</strong>ã€‚</p>
<p>MetalLB ä½¿ç”¨<strong>æ ‡å‡†çš„ç½‘ç»œæˆ–è·¯ç”±åè®®</strong>æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œå…·ä½“å–å†³äºä½¿ç”¨å“ªç§æ¨¡å¼ï¼Œå¦‚ï¼šARPã€NDPæˆ–BGPåè®®ã€‚</p>
<h3 id="å®‰è£…-metallb">å®‰è£… MetalLB</h3>
<blockquote>
<p><a class="link" href="https://metallb.universe.tf/installation/"  target="_blank" rel="noopener"
    >https://metallb.universe.tf/installation/</a></p>
</blockquote>
<h4 id="å‰ç½®æ¡ä»¶">å‰ç½®æ¡ä»¶</h4>
<blockquote>
<p><a class="link" href="https://metallb.universe.tf/#requirements"  target="_blank" rel="noopener"
    >https://metallb.universe.tf/#requirements</a></p>
</blockquote>
<p>æ³¨æ„ Kubernetes ç½‘ç»œæ’ä»¶çš„å…¼å®¹æ€§ï¼Œå¸¸ç”¨çš„ç½‘ç»œç»„ä»¶ Ciliumã€Flannelç­‰éƒ½æ˜¯å…¼å®¹çš„ã€‚</p>
<h4 id="ä½¿ç”¨-manifest-å®‰è£…">ä½¿ç”¨ Manifest å®‰è£…</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.13.7/config/manifests/metallb-native.yaml
</span></span></code></pre></div><p>åœ¨å¯¹åº”å‘½åç©ºé—´ä¸‹æœ‰ä¸¤ç§ç»„ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ k get po -n metallb-system
</span></span><span style="display:flex;"><span>NAME                          READY   STATUS    RESTARTS        AGE
</span></span><span style="display:flex;"><span>controller-7597dd4f7b-kzhqd   1/1     Running   <span style="color:#ae81ff">0</span>               7h54m
</span></span><span style="display:flex;"><span>speaker-g4rhm                 1/1     Running   <span style="color:#ae81ff">0</span>               7h54m
</span></span><span style="display:flex;"><span>speaker-m6xtr                 1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>6h38m ago<span style="color:#f92672">)</span>   7h54m
</span></span><span style="display:flex;"><span>speaker-pmt5w                 1/1     Running   <span style="color:#ae81ff">0</span>               7h54m
</span></span><span style="display:flex;"><span>speaker-wvvz6                 1/1     Running   <span style="color:#ae81ff">0</span>               7h54m
</span></span></code></pre></div><ul>
<li><code>metallb-system/controller</code>ï¼šè¿™æ˜¯å¤„ç† IP åœ°å€åˆ†é…çš„ï¼Œé›†ç¾¤ç»´åº¦çš„æ§åˆ¶å™¨ã€‚</li>
<li><code>metallb-system/speaker</code>ï¼šæ˜¯ daemonset ç±»å‹ã€‚è¿™ä¸ªç»„ä»¶ä½¿ç”¨æˆ‘ä»¬æ‰€é€‰æ‹©çš„åè®®ï¼Œä½¿æœåŠ¡å¯è¾¾ã€‚</li>
</ul>
<h3 id="é…ç½®äºŒå±‚æ¨¡å¼ä¸‹çš„-loadbalancer">é…ç½®äºŒå±‚æ¨¡å¼ä¸‹çš„ LoadBalancer</h3>
<p>è¿™æ˜¯æœ€ç®€å•ä¸”å¸¸ç”¨çš„æ¨¡å¼ã€‚æˆ‘ä»¬åªéœ€è¦åˆ†é…ä¸€ä¸ª IP ç©ºé—´ä½œä¸º IP æ± ï¼Œç„¶åå°†å…¶å‘ŠçŸ¥ <code>L2Advertisement</code> å³å¯ï¼Œ<code>L2Advertisement</code> å°†è¿™ä¸ª IP æ± å‘å¸ƒå‡ºå»ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">metallb.io/v1beta1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">IPAddressPool</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">first-pool</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">metallb-system</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">addresses</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># æˆ‘çš„å†…ç½‘ç¯å¢ƒæ˜¯ 192.168.0.0/24</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># åˆ†é…åœ°å€èŒƒå›´</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">192.168.0.201-192.168.0.233</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">metallb.io/v1beta1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">L2Advertisement</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">example</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">metallb-system</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ipAddressPools</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">first-pool</span>
</span></span></code></pre></div><h3 id="åˆ›å»º-loadbalancer-ç±»å‹çš„æœåŠ¡">åˆ›å»º LoadBalancer ç±»å‹çš„æœåŠ¡</h3>
<p>è¿™é‡Œä½¿ç”¨ Tekton çš„ Dashboard ä¸ºä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">tekton-dashboard</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">tekton-pipelines</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">http</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">port</span>: <span style="color:#ae81ff">9097</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">9097</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># é…ç½®ä¸º LoadBalancer ç±»å‹</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">LoadBalancer</span>
</span></span></code></pre></div><p>åˆ›å»ºåï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ k get svc -n tekton-pipelines
</span></span><span style="display:flex;"><span>NAME                                TYPE           CLUSTER-IP       EXTERNAL-IP     PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>                              AGE
</span></span><span style="display:flex;"><span>tekton-dashboard                    LoadBalancer   10.100.157.67    192.168.0.201   9097:32176/TCP                       18s
</span></span></code></pre></div><p>Metallb ä¸ºå…¶åˆ†é…äº† <code>192.168.0.201</code> è¿™ä¸ªåœ°å€ï¼Œæœ‰ä¸¤ä¸ªç«¯å£ <code>9097</code> å’Œ <code>32176</code>ã€‚å½“ç„¶ï¼Œ<code>9097</code> æ˜¯æˆ‘ä»¬æŒ‡å®šçš„ï¼Œé‚£ <code>32176</code> æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ</p>
<p>å…ˆè¯•ç€è®¿é—®ä¸€ä¸‹ <code>192.168.0.201:9097</code> å’Œ<code>192.168.0.201:32176</code>ï¼š</p>
<p><img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126203748156.png"
	
	
	
	loading="lazy"
	
		alt="image-20230126203748156"
	
	
></p>
<!-- raw HTML omitted -->
<p>å‘ç°ï¼Œ<code>192.168.0.201:32176</code> è¿™ä¸ªåœ°å€ä¸èƒ½è®¿é—®åˆ°æˆ‘ä»¬çš„æœåŠ¡ï¼Œé‚£å®ƒä¸ºä»€ä¹ˆä¼šå­˜åœ¨å‘¢ï¼Ÿ</p>
<h4 id="loadbalancer-çš„ç«¯å£">LoadBalancer çš„ç«¯å£</h4>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªç–‘æƒ‘ï¼Œæˆ‘é‡æ–°æ£€æŸ¥äº†æˆ‘çš„ yaml æ–‡ä»¶ï¼Œå‘ç°ç¡®å®æ²¡æœ‰ <code>32176</code> è¿™ä¸ªç«¯å£ç›¸å…³çš„é…ç½®ï¼Œå®ƒåƒæ˜¯ä¸€ä¸ª <code>NodePort</code> ç±»å‹æœåŠ¡æ‰€æœ‰çš„ç«¯å£ã€‚</p>
<p>åœ¨æŸ¥è¯¢æ–‡æ¡£åï¼Œæˆ‘æƒ³åº”è¯¥æ˜¯è¿™ä¸ªåŸå› ï¼š</p>
<blockquote>
<p>&ldquo;è¦å®ç° <code>type: LoadBalancer</code> çš„æœåŠ¡ï¼ŒKubernetes é€šå¸¸é¦–å…ˆè¿›è¡Œä¸è¯·æ±‚ <code>type: NodePort</code> æœåŠ¡ç­‰æ•ˆçš„æ›´æ”¹ã€‚ cloud-controller-manager ç»„ä»¶ç„¶åé…ç½®å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ä»¥å°†æµé‡è½¬å‘åˆ°å·²åˆ†é…çš„èŠ‚ç‚¹ç«¯å£ã€‚&rdquo;</p>
<p><a class="link" href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/#type-nodeport"  target="_blank" rel="noopener"
    >https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/#type-nodeport</a></p>
</blockquote>
<p>æˆ‘ä»¬çš„è´Ÿè½½å‡è¡¡å™¨å…ˆæ˜¯ä½¿ç”¨ä¸€ä¸ª NodePort ç«¯å£ï¼Œç„¶åå°† LB æœåŠ¡ä» EXTERNAL IP æ¥çš„å¤–éƒ¨æµé‡è½¬å‘åˆ°è¿™ä¸ª NodePort ï¼Œä¹Ÿå°±æ˜¯ <code>32176</code> ä¸­ã€‚</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ª NodePort ä½œä¸º LB çš„ä¸­é—´ç«¯å£å‘¢ï¼Ÿå¦‚æœä¸ç”¨è¿™ä¸ªç«¯å£ï¼Œé‚£ä¹ˆ LB ä¼šç›´æ¥å°†æµé‡è½¬å‘åˆ° Pod ä¸­ã€‚æˆ‘è§‰å¾—åº”è¯¥æ˜¯éœ€è¦èŠ‚ç‚¹çš„ NodePort åšä¸€å±‚è´Ÿè½½å‡è¡¡å§ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘å°è¯•è®¿é—®é›†ç¾¤ä¸­å·¥ä½œèŠ‚ç‚¹çš„ <code>32176</code>ï¼Œç«¯å£ï¼Œæœç„¶ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„è¯¥ç«¯å£éƒ½å¯ä»¥è®¿é—®åˆ°æœåŠ¡ï¼š</p>
<p><img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126205831162.png"
	
	
	
	loading="lazy"
	
		alt="image-20230126205831162"
	
	
></p>
<p><img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126205857312.png"
	
	
	
	loading="lazy"
	
		alt="image-20230126205857312"
	
	
></p>
<p><img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126205912808.png"
	
	
	
	loading="lazy"
	
		alt="image-20230126205912808"
	
	
></p>
<p>å®ƒå°±æ˜¯ NodePortã€‚</p>
<p>LB ç±»å‹æœåŠ¡å°†æ¥è‡ª EXTERNAL-IP:Port çš„æµé‡ï¼Œé€šè¿‡ NodePort è´Ÿè½½å‡è¡¡åˆ° Pod ä¸­ã€‚è¿™å¯èƒ½ä¹Ÿæ˜¯ LoadBalancer åå­—çš„æ„æ€ï¼Ÿ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">http</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">port</span>: <span style="color:#ae81ff">9097</span>	<span style="color:#75715e"># EXTERNAL-IP çš„ç«¯å£æ˜¯è¿™ä¸ª</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">9097</span>
</span></span></code></pre></div></blockquote>
<p>æˆ‘è¿›ä¸€æ­¥å°è¯• <a class="link" href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/#load-balancer-nodeport-allocation"  target="_blank" rel="noopener"
    >ç¦ç”¨è´Ÿè½½å‡è¡¡å™¨èŠ‚ç‚¹ç«¯å£åˆ†é…</a>ï¼Œé¦–å…ˆæŠŠä¹‹å‰çš„ Service åˆ é™¤ï¼Œä¿®æ”¹ yamlï¼Œå† applyï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  ,,,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">tekton-dashboard</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">tekton-pipelines</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># åœ¨ spec ä¸­åŠ ä¸Šè¿™ä¸ªå­—æ®µ ä¸å†ä¸ºå…¶åˆ†é… NodePort</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">allocateLoadBalancerNodePorts</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">http</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">port</span>: <span style="color:#ae81ff">9097</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">9097</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">LoadBalancer</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">...</span>
</span></span></code></pre></div><p>æœç„¶ï¼ŒNodePort æ²¡æœ‰äº†ï¼Œä¹Ÿè¿›ä¸€æ­¥éªŒè¯äº†ä¹‹å‰çŒœæƒ³ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ k get svc -n tekton-pipelines
</span></span><span style="display:flex;"><span>NAME                                TYPE           CLUSTER-IP       EXTERNAL-IP     PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>                              AGE
</span></span><span style="display:flex;"><span>tekton-dashboard                    LoadBalancer   10.111.86.40     192.168.0.201   9097/TCP                             3s
</span></span></code></pre></div><h2 id="å°ç»“">å°ç»“</h2>
<p>æˆ‘ä»¬ç¨å¾®è®¨è®ºäº†å…³äº Loadbalancer è¿™ä¸€ç±»å‹çš„æœåŠ¡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æœ¬åœ°é›†ç¾¤/è£¸é‡‘å±/ç§æœ‰äº‘é€šè¿‡ MetaLB å®ç° Loadbalancerï¼›</li>
<li>MetaLB çš„éƒ¨ç½²ã€é…ç½®ã€ä½¿ç”¨ï¼›</li>
<li>Loadbalancer å®ƒçš„ä¸¤ä¸ªç«¯å£ï¼Œä»¥åŠé€šè¿‡ NodePort è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼›</li>
<li>è¿˜æœ‰ä¸å¸¸ç”¨çš„ <code>ExternalName</code> ç±»å‹æœåŠ¡ã€‚</li>
</ul>
<h1 id="ingress-1">Ingress</h1>
<!-- raw HTML omitted -->
<p>ä»å®˜ç½‘è¿™å¼ å›¾æ¥çœ‹ï¼ŒIngress çš„ä½œç”¨å°±æ¯”è¾ƒæ¸…æ™°äº†ï¼Œé€šè¿‡ä¸€ç»„è·¯ç”±è§„åˆ™ï¼Œå°†é›†ç¾¤å¤–çš„è¯·æ±‚è´Ÿè½½å‡è¡¡åˆ°å†…éƒ¨æœåŠ¡ï¼Œå®ç°é›†ç¾¤æµé‡ç»Ÿä¸€æ¥å…¥ã€‚</p>
<p>æˆ‘ä»¬å°†ä¸Šæ–‡ä¸­ tekton-dashboard æœåŠ¡ä¿®æ”¹ä¸º ClusterIPï¼Œç„¶åé€šè¿‡ Ingress æš´éœ²æœåŠ¡ï¼Œå®Œæˆæˆ‘ä»¬è¿™éƒ¨åˆ†çš„å®è·µã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ k get svc -n tekton-pipelines
</span></span><span style="display:flex;"><span>NAME                                TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>                              AGE
</span></span><span style="display:flex;"><span>tekton-dashboard                    ClusterIP   10.101.20.90     &lt;none&gt;        9097/TCP                             5s
</span></span></code></pre></div><p>è¿™é‡Œä½¿ç”¨ <a class="link" href="https://kubernetes.github.io/ingress-nginx/deploy/"  target="_blank" rel="noopener"
    >Ingress-Nginx</a> ä½œä¸ºæˆ‘ä»¬é›†ç¾¤çš„ ingressã€‚</p>
<h2 id="ingress-nginx">Ingress-Nginx</h2>
<h3 id="å®‰è£…-ingress-nginx">å®‰è£… Ingress-Nginx</h3>
<p>Nginx å®ç°çš„ Ingress Controller æä¾›äº† Cloud å’Œ Metal ç‰ˆæœ¬çš„ manifestã€‚ä¸»è¦çš„åŒºåˆ«æ˜¯ Cloud ç‰ˆæœ¬ä½¿ç”¨ LB æš´éœ²æœåŠ¡ï¼Œè€Œ Metal ä½¿ç”¨ NodePort æš´éœ²æœåŠ¡ã€‚å¦‚æœä½ è·Ÿéšä¸Šæ–‡ï¼Œéƒ¨ç½²äº† MetaLB åœ¨æœ¬åœ°é›†ç¾¤ï¼Œå°±æ¨èä½¿ç”¨ Cloud ç‰ˆæœ¬çš„ manifestã€‚</p>
<p>æ³¨æ„ï¼ŒåŸå§‹ manifest ä¸­åŒ…å« registry.k8s.io çš„é•œåƒï¼Œå¯èƒ½ä¸æ–¹ä¾¿æ‹‰å–ï¼Œæˆ‘æ›´æ¢äº† docker hub ä¸­å¯¹åº”çš„é•œåƒï¼Œä¸»è¦æœ‰ä¸‰å¤„åœ°æ–¹ï¼Œå…±ä¸¤ä¸ªé•œåƒï¼š</p>
<ul>
<li>dyrnq/ingress-nginx-controller:v1.4.0</li>
<li>liangjw/kube-webhook-certgen:v1.1.1</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl apply -f https://ghproxy.com/https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.4.0/deploy/static/provider/cloud/deploy.yam
</span></span></code></pre></div><p>å¦‚æœé•œåƒæ— æ³•æ‹‰å–ï¼Œæ³¨æ„ä¿®æ”¹å…¶ä¸­çš„é•œåƒä»“åº“ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ k get po -n ingress-nginx
</span></span><span style="display:flex;"><span>NAME                                        READY   STATUS      RESTARTS   AGE
</span></span><span style="display:flex;"><span>ingress-nginx-admission-create-ptg6f        0/1     Completed   <span style="color:#ae81ff">0</span>          19m
</span></span><span style="display:flex;"><span>ingress-nginx-admission-patch-lndpj         0/1     Completed   <span style="color:#ae81ff">0</span>          19m
</span></span><span style="display:flex;"><span>ingress-nginx-controller-8445cd49cf-l4q4r   1/1     Running     <span style="color:#ae81ff">0</span>          19m
</span></span><span style="display:flex;"><span>$ k get svc -n ingress-nginx
</span></span><span style="display:flex;"><span>NAME                                 TYPE           CLUSTER-IP      EXTERNAL-IP     PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>                      AGE
</span></span><span style="display:flex;"><span>ingress-nginx-controller             LoadBalancer   10.106.83.156   192.168.0.201   80:31527/TCP,443:32376/TCP   20m
</span></span><span style="display:flex;"><span>ingress-nginx-controller-admission   ClusterIP      10.97.1.125     &lt;none&gt;          443/TCP                      20m
</span></span></code></pre></div><p>éƒ¨ç½²å®Œæˆåï¼Œçœ‹åˆ° LB åˆ†é…çš„ IP æ˜¯ <code>192.168.0.201</code>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é…ç½® ingressï¼Œä» <code>192.168.0.201:80</code> ç«¯å£è®¿é—®æˆ‘ä»¬æƒ³è¦çš„æœåŠ¡ã€‚</p>
<h3 id="é…ç½®-ingress-æš´éœ²-tekton-dashboard-æœåŠ¡">é…ç½® Ingress æš´éœ² Tekton Dashboard æœåŠ¡</h3>
<p>é¦–å…ˆç¡®ä¿æˆ‘ä»¬çš„ Tekton Dashboard æœåŠ¡ä»¥åŠåˆ›å»ºã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ k get svc -n tekton-pipelines
</span></span><span style="display:flex;"><span>NAME                                TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>                              AGE
</span></span><span style="display:flex;"><span>tekton-dashboard                    ClusterIP   10.101.20.90     &lt;none&gt;        9097/TCP                             5s
</span></span></code></pre></div><p>ä¸€ä¸ª Ingress çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>apiVersion: networking.k8s.io/v1
</span></span><span style="display:flex;"><span>kind: Ingress
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>  name: ingress-resource
</span></span><span style="display:flex;"><span>  namespace: tekton-pipelines
</span></span><span style="display:flex;"><span>  annotations:
</span></span><span style="display:flex;"><span>    kubernetes.io/ingress.class: nginx
</span></span><span style="display:flex;"><span>    nginx.ingress.kubernetes.io/ssl-redirect: <span style="color:#e6db74">&#34;false&#34;</span>
</span></span><span style="display:flex;"><span>spec:
</span></span><span style="display:flex;"><span>  rules:
</span></span><span style="display:flex;"><span>  	<span style="color:#75715e"># æˆ‘ä»¬ä¸ºå…¶è®¾ç½®äº†åŸŸå ä½†æ˜¯å…¬ç½‘ DNS å¯ä¸ä¼šè§£æå®ƒ</span>
</span></span><span style="display:flex;"><span>  	<span style="color:#75715e"># éœ€è¦åœ¨æˆ‘ä»¬æœ¬åœ°é…ç½® host æ¥æ­£ç¡®è§£æ</span>
</span></span><span style="display:flex;"><span>    - host: tekton.k8s.local
</span></span><span style="display:flex;"><span>      http:
</span></span><span style="display:flex;"><span>        paths:
</span></span><span style="display:flex;"><span>          - path: /
</span></span><span style="display:flex;"><span>            pathType: Prefix
</span></span><span style="display:flex;"><span>            backend:
</span></span><span style="display:flex;"><span>              service:
</span></span><span style="display:flex;"><span>                name: tekton-dashboard
</span></span><span style="display:flex;"><span>                port:
</span></span><span style="display:flex;"><span>                  number: <span style="color:#ae81ff">9097</span>
</span></span></code></pre></div><p>éƒ¨ç½²ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ k apply -f dashboard-ingress.yaml
</span></span></code></pre></div><p>éƒ¨ç½²å®Œæˆä¹‹åï¼Œæˆ‘ä»¬<strong>éœ€è¦åœ¨æœ¬åœ°é…ç½®åŸŸåè§£æ</strong>ï¼Œè®© <code>tekton.k8s.local</code> èƒ½å¤Ÿè§£æåˆ° <code>192.168.0.201</code> ã€‚</p>
<p>ç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—® <code>http://tekton.k8s.local/</code>ã€‚åœ¨æµè§ˆå™¨ä¸­é»˜è®¤è§£æåˆ° <code>192.168.0.201:80</code> çš„æ ¹ <code>/ </code> è·¯ç”±è·¯å¾„ä¸‹ã€‚</p>
<p><img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126223316998.png"
	
	
	
	loading="lazy"
	
		alt="image-20230126223316998"
	
	
></p>
<p>è¿™æ ·å°±å®ç°äº†é€šè¿‡ ingress æš´éœ²é›†ç¾¤å†…éƒ¨æœåŠ¡ã€‚</p>
<h3 id="å…³äºé…ç½®-host">å…³äºé…ç½® host</h3>
<p>æˆ‘ä»¬åœ¨ ingress çš„é…ç½®ä¸­æŒ‡å®šäº† host å­—æ®µï¼Œå¹¶é…ç½®äº†æœ¬åœ°åŸŸåè§£æå»è®¿é—®è¿™ä¸ªåŸŸåï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">host</span>: <span style="color:#ae81ff">tekton.k8s.local</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#ae81ff">...</span>
</span></span></code></pre></div><p>è™½ç„¶æˆ‘ä»¬çŸ¥é“ ingress æš´éœ²çš„ IP æ˜¯ <code>192.168.0.201:80</code> ï¼Œä½†æ˜¯ç›´æ¥è®¿é—®è¿™ä¸ªåœ°å€å¹¶ä¸èƒ½æ‰¾åˆ°æœåŠ¡ï¼š</p>
<p><img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126224456243.png"
	
	
	
	loading="lazy"
	
		alt="image-20230126224456243"
	
	
></p>
<p>å¦‚æœæˆ‘ä»¬å…ˆé€šè¿‡ IP:Port çš„å½¢å¼ï¼Œè€Œä¸é€šè¿‡åŸŸåï¼Œå°±ä¸èƒ½åœ¨ <code>spec.rules</code> ä¸­ä¸ºå…¶é…ç½® hostï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨è¿™ç§é…ç½®ï¼š</p>
<blockquote>
<p><a class="link" href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/#ingress-rules"  target="_blank" rel="noopener"
    >https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/#ingress-rules</a></p>
<p>&ldquo;æœªæŒ‡å®š <code>host</code> çš„è§„åˆ™é€‚ç”¨äºé€šè¿‡æŒ‡å®š IP åœ°å€çš„æ‰€æœ‰å…¥ç«™ HTTP é€šä¿¡&rdquo;ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">networking.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Ingress</span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>  	<span style="color:#75715e"># ä¸æŒ‡å®š host</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#- host: tekton.k8s.local</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">http</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">paths</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">pathType</span>: <span style="color:#ae81ff">Prefix</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">backend</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">service</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">name</span>: <span style="color:#ae81ff">tekton-dashboard</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">port</span>:
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">number</span>: <span style="color:#ae81ff">9097</span>
</span></span></code></pre></div><p>è¿™æ ·è¿›è¡Œéƒ¨ç½²ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ ingress æ§åˆ¶å™¨çš„ LB åœ°å€å’Œç«¯å£ (é»˜è®¤ http ä¸º 80)ï¼Œä»å…¶æ ¹è·¯å¾„ä¸‹è®¿é—®åˆ°æˆ‘ä»¬çš„æœåŠ¡äº†ã€‚</p>
<p><img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230126223824349.png"
	
	
	
	loading="lazy"
	
		alt="image-20230126223824349"
	
	
></p>
<h2 id="å°ç»“-1">å°ç»“</h2>
<p>æœ¬éƒ¨åˆ†æˆ‘ä»¬ç®€å•ä»‹ç»å’Œå®è·µäº† Ingressï¼Œä¸»è¦æœ‰ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>
<p>ç®€è¦é˜è¿° cloud å’Œ metal ç¯å¢ƒä¸‹ï¼Œingress-nginx æ§åˆ¶å™¨ service ç±»å‹çš„ä¸åŒï¼›</p>
</li>
<li>
<p>å®‰è£… LoadBalancer ç±»å‹çš„ ingress-nginx æ§åˆ¶å™¨ï¼›</p>
</li>
<li>
<p>ä¸º ClusterIP ç±»å‹çš„ Tekton Dashboard æœåŠ¡é…ç½® ingress è§„åˆ™ï¼›</p>
</li>
<li>
<p>å…³äºé…ç½® ingress ä¸­ hostï¼Œä½¿ç”¨ åŸŸå/IP è®¿é—®çš„å°å‘ã€‚</p>
</li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/kubernetes/">Kubernetes</a>
        
            <a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/">äº‘åŸç”Ÿ</a>
        
            <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/">ä¸­é—´ä»¶</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            æœ€åæ›´æ–°äº Jan 26, 2023 23:03 CST
        </span>
    </section></footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/cri-dockerd%E5%9C%A8kubernetes1.24%E5%90%8E%E7%BB%A7%E7%BB%AD%E4%BD%BF%E7%94%A8docker%E4%BD%9C%E4%B8%BA%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%B6/">
        
        
            <div class="article-image">
                
                    <img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230111161434207.png" loading="lazy" data-key="" data-hash="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/image-20230111161434207.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">cri-dockerdï¼Œåœ¨kubernetes1.24åç»§ç»­ä½¿ç”¨Dockerä½œä¸ºå®¹å™¨è¿è¡Œæ—¶</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E8%AE%B0%E4%B8%80%E6%AC%A1kubernetes%E4%BD%BF%E7%94%A8ciliumcoredns%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5%E5%A4%B1%E8%B4%A5%E7%9A%84%E6%8E%92%E9%94%99/">
        
        

        <div class="article-details">
            <h2 class="article-title">è®°ä¸€æ¬¡Kubernetesä½¿ç”¨Ciliumï¼Œcorednså¥åº·æ£€æŸ¥å¤±è´¥çš„æ’é”™</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E6%9E%84%E5%BB%BA%E5%BA%94%E7%94%A8%E6%97%B6%E5%A6%82%E4%BD%95%E7%BC%A9%E5%B0%8F%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E7%9A%84%E4%BD%93%E7%A7%AF/">
        
        
            <div class="article-image">
                
                    <img src="/post-images/image-20230113160652452.png" loading="lazy" data-key="" data-hash="/post-images/image-20230113160652452.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">æ„å»ºåº”ç”¨æ—¶å¦‚ä½•ç¼©å°å®¹å™¨é•œåƒçš„ä½“ç§¯</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/ieee-cloud-21-%E4%BA%91%E4%B8%8A%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3%E5%90%88%E8%BE%91/">
        
        

        <div class="article-details">
            <h2 class="article-title">IEEE CLOUD 21 äº‘ä¸Šèµ„æºç®¡ç†ç›¸å…³åˆè¾‘</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/showar-right-sizing-and-efficient-scheduling-of-microservices/">
        
        

        <div class="article-details">
            <h2 class="article-title">SHOWAR: Right-Sizing And Efficient Scheduling of Microservices</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2018 - 
        
        2023 fmt.Println(&#34;Li Duo&#34;)
    </section>
    
    <section class="powerby">
        
            è‡ªè®¤ä¸ºæ˜¯å¹»è±¡æ³¢æ™®æ˜Ÿçš„æ¥å®¢ <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
