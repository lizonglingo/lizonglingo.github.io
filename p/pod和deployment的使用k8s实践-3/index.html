<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='ä½¿ç”¨Pod Pod.yaml apiVersion: v1 kind: Pod metadata: name: hello-pod labels: zone: prod version: v1 spec: containers: - name: hello-ctr image: nigelpoulton/k8sbook:latest ports: - containerPort: 8080 åˆ›å»ºPod root@lzl:/home/lzl# kubectl apply -f ./WorkSpace/k8s/pod/Pod.yml pod/hello-pod created root@lzl:/home/lzl# kubectl get Pods NAME READY STATUS RESTARTS AGE hello-pod 0/1 ContainerCreating 0 12s # è¦ç­‰ä¸€ä¼šï¼Œå› ä¸ºæœ‰æ‹‰å–é•œåƒçš„æ—¶'>
<title>Podå’ŒDeploymentçš„ä½¿ç”¨(k8så®è·µ-3)</title>

<link rel='canonical' href='https://lizonglingo.github.io/p/pod%E5%92%8Cdeployment%E7%9A%84%E4%BD%BF%E7%94%A8k8s%E5%AE%9E%E8%B7%B5-3/'>

<link rel="stylesheet" href="/scss/style.min.811a71d93d8df406268b1c66d015cd3f2252f454f25ac10a683e6f7b5ad9d92d.css"><meta property='og:title' content='Podå’ŒDeploymentçš„ä½¿ç”¨(k8så®è·µ-3)'>
<meta property='og:description' content='ä½¿ç”¨Pod Pod.yaml apiVersion: v1 kind: Pod metadata: name: hello-pod labels: zone: prod version: v1 spec: containers: - name: hello-ctr image: nigelpoulton/k8sbook:latest ports: - containerPort: 8080 åˆ›å»ºPod root@lzl:/home/lzl# kubectl apply -f ./WorkSpace/k8s/pod/Pod.yml pod/hello-pod created root@lzl:/home/lzl# kubectl get Pods NAME READY STATUS RESTARTS AGE hello-pod 0/1 ContainerCreating 0 12s # è¦ç­‰ä¸€ä¼šï¼Œå› ä¸ºæœ‰æ‹‰å–é•œåƒçš„æ—¶'>
<meta property='og:url' content='https://lizonglingo.github.io/p/pod%E5%92%8Cdeployment%E7%9A%84%E4%BD%BF%E7%94%A8k8s%E5%AE%9E%E8%B7%B5-3/'>
<meta property='og:site_name' content='fmt.Println(&#34;Li Duo&#34;)'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Kubernetes' /><meta property='article:tag' content='äº‘åŸç”Ÿ' /><meta property='article:published_time' content='2022-01-21T18:28:33&#43;08:00'/><meta property='article:modified_time' content='2022-01-21T18:28:33&#43;08:00'/>
<meta name="twitter:title" content="Podå’ŒDeploymentçš„ä½¿ç”¨(k8så®è·µ-3)">
<meta name="twitter:description" content="ä½¿ç”¨Pod Pod.yaml apiVersion: v1 kind: Pod metadata: name: hello-pod labels: zone: prod version: v1 spec: containers: - name: hello-ctr image: nigelpoulton/k8sbook:latest ports: - containerPort: 8080 åˆ›å»ºPod root@lzl:/home/lzl# kubectl apply -f ./WorkSpace/k8s/pod/Pod.yml pod/hello-pod created root@lzl:/home/lzl# kubectl get Pods NAME READY STATUS RESTARTS AGE hello-pod 0/1 ContainerCreating 0 12s # è¦ç­‰ä¸€ä¼šï¼Œå› ä¸ºæœ‰æ‹‰å–é•œåƒçš„æ—¶">
    <link rel="shortcut icon" href="/favicon.ico" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-SPJXNM3WZ6"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-SPJXNM3WZ6', { 'anonymize_ip': false });
}
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b30bfbf01ac692ef3da66a21b24e6edb";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="https://picgo-lzl.oss-cn-beijing.aliyuncs.com/1634453613659.jpeg" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">ğŸ‘‹</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">fmt.Println(&#34;Li Duo&#34;)</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/lizonglingo'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
            
        
                
                <li >
                    <a href='/' >
                        
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                        
                        <span>ä¸»é¡µ</span>
                    </a>
                </li>
                
            
        
        
            
        
                
                <li >
                    <a href='/%E5%85%B3%E4%BA%8E/' >
                        
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                        
                        <span>å…³äº</span>
                    </a>
                </li>
                
            
        
        
            
        
                
                <li >
                    <a href='/archives/' >
                        
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                        
                        <span>å½’æ¡£</span>
                    </a>
                </li>
                
            
        
        
            
        
                
                <li >
                    <a href='/%E9%93%BE%E6%8E%A5/' >
                        
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                        
                        <span>é“¾æ¥</span>
                    </a>
                </li>
                
            
        
        
            
        
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                <form action="/search/" class="search-form widget" >
        <p>
            <label>æœç´¢</label>
            <input name="keyword" required placeholder="è¾“å…¥å…³é”®è¯..." />
        
            <button title="æœç´¢">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
            
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#ä½¿ç”¨pod">ä½¿ç”¨Pod</a>
      <ul>
        <li><a href="#è·å–podä¿¡æ¯">è·å–Podä¿¡æ¯</a></li>
        <li><a href="#è¿›å…¥podä¸­çš„å®¹å™¨å†…éƒ¨">è¿›å…¥Podä¸­çš„å®¹å™¨å†…éƒ¨</a></li>
        <li><a href="#åˆ é™¤pod">åˆ é™¤Pod</a></li>
      </ul>
    </li>
    <li><a href="#ä½¿ç”¨deploymentéƒ¨ç½²pod">ä½¿ç”¨Deploymentéƒ¨ç½²Pod</a>
      <ul>
        <li><a href="#éƒ¨ç½²deployment">éƒ¨ç½²Deployment</a></li>
        <li><a href="#æŸ¥çœ‹deployment">æŸ¥çœ‹Deployment</a></li>
        <li><a href="#è®¿é—®éƒ¨ç½²çš„åº”ç”¨">è®¿é—®éƒ¨ç½²çš„åº”ç”¨</a></li>
      </ul>
    </li>
    <li><a href="#è§£å†³ç”±äºiptablesç‰ˆæœ¬å·®å¼‚å¯¼è‡´çš„k8sç½‘ç»œé—®é¢˜">è§£å†³ç”±äºiptablesç‰ˆæœ¬å·®å¼‚å¯¼è‡´çš„K8sç½‘ç»œé—®é¢˜</a></li>
    <li><a href="#è§£å†³ç”±äºè™šæ‹ŸæœºæŒ‚èµ·æ¢å¤è™šæ‹Ÿæœºåé›†ç¾¤ç½‘ç»œå¼‚å¸¸çš„é—®é¢˜">è§£å†³ç”±äºè™šæ‹ŸæœºæŒ‚èµ·ï¼Œæ¢å¤è™šæ‹Ÿæœºåé›†ç¾¤ç½‘ç»œå¼‚å¸¸çš„é—®é¢˜</a></li>
    <li><a href="#æ»šåŠ¨å‡çº§ä¸å›æ»š">æ»šåŠ¨å‡çº§ä¸å›æ»š</a>
      <ul>
        <li><a href="#æ»šåŠ¨å‡çº§">æ»šåŠ¨å‡çº§</a></li>
        <li><a href="#å›æ»š">å›æ»š</a></li>
      </ul>
    </li>
    <li><a href="#åˆ é™¤deploymentå’Œservice">åˆ é™¤Deploymentå’ŒService</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/kubernetes/" >
                Kubernetes
            </a>
        
            <a href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/" >
                äº‘åŸç”Ÿ
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/pod%E5%92%8Cdeployment%E7%9A%84%E4%BD%BF%E7%94%A8k8s%E5%AE%9E%E8%B7%B5-3/">Podå’ŒDeploymentçš„ä½¿ç”¨(k8så®è·µ-3)</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 21, 2022</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 10 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="ä½¿ç”¨pod">ä½¿ç”¨Pod</h2>
<p>Pod.yaml</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">hello-pod</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">zone</span>: <span style="color:#ae81ff">prod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">version</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">hello-ctr</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">nigelpoulton/k8sbook:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">8080</span>
</span></span></code></pre></div><p>åˆ›å»ºPod</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl apply -f ./WorkSpace/k8s/pod/Pod.yml 
</span></span><span style="display:flex;"><span>pod/hello-pod created
</span></span><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl get Pods
</span></span><span style="display:flex;"><span>NAME        READY   STATUS              RESTARTS   AGE
</span></span><span style="display:flex;"><span>hello-pod   0/1     ContainerCreating   <span style="color:#ae81ff">0</span>          12s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è¦ç­‰ä¸€ä¼šï¼Œå› ä¸ºæœ‰æ‹‰å–é•œåƒçš„æ—¶é—´</span>
</span></span><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl get Pods
</span></span><span style="display:flex;"><span>NAME        READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>hello-pod   1/1     Running   <span style="color:#ae81ff">0</span>          110s
</span></span></code></pre></div><h3 id="è·å–podä¿¡æ¯">è·å–Podä¿¡æ¯</h3>
<p>è·å–Podè¯¦ç»†ä¿¡æ¯ï¼š</p>
<ul>
<li><code>kubectl get Pods hello-pod -o yaml</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl get Pods hello-pod -o yaml
</span></span><span style="display:flex;"><span>apiVersion: v1
</span></span><span style="display:flex;"><span>kind: Pod
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>  annotations:
</span></span><span style="display:flex;"><span>    kubectl.kubernetes.io/last-applied-configuration: |
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;apiVersion&#34;</span>:<span style="color:#e6db74">&#34;v1&#34;</span>,<span style="color:#e6db74">&#34;kind&#34;</span>:<span style="color:#e6db74">&#34;Pod&#34;</span>,<span style="color:#e6db74">&#34;metadata&#34;</span>:<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;annotations&#34;</span>:<span style="color:#f92672">{}</span>,<span style="color:#e6db74">&#34;labels&#34;</span>:<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;version&#34;</span>:<span style="color:#e6db74">&#34;v1&#34;</span>,<span style="color:#e6db74">&#34;zone&#34;</span>:<span style="color:#e6db74">&#34;prod&#34;</span><span style="color:#f92672">}</span>,<span style="color:#e6db74">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;hello-pod&#34;</span>,<span style="color:#e6db74">&#34;namespace&#34;</span>:<span style="color:#e6db74">&#34;default&#34;</span><span style="color:#f92672">}</span>,<span style="color:#e6db74">&#34;spec&#34;</span>:<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;containers&#34;</span>:<span style="color:#f92672">[{</span><span style="color:#e6db74">&#34;image&#34;</span>:<span style="color:#e6db74">&#34;nigelpoulton/k8sbook:latest&#34;</span>,<span style="color:#e6db74">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;hello-ctr&#34;</span>,<span style="color:#e6db74">&#34;ports&#34;</span>:<span style="color:#f92672">[{</span><span style="color:#e6db74">&#34;containerPort&#34;</span>:8080<span style="color:#f92672">}]}]}}</span>
</span></span><span style="display:flex;"><span>  creationTimestamp: <span style="color:#e6db74">&#34;2022-01-19T10:26:35Z&#34;</span>
</span></span><span style="display:flex;"><span>  labels:
</span></span><span style="display:flex;"><span>    version: v1
</span></span><span style="display:flex;"><span>    zone: prod
</span></span><span style="display:flex;"><span>  name: hello-pod
</span></span><span style="display:flex;"><span>  namespace: default
</span></span><span style="display:flex;"><span>  resourceVersion: <span style="color:#e6db74">&#34;29553&#34;</span>
</span></span><span style="display:flex;"><span>  uid: 1f41e62a-a951-4593-83f7-f3e7398b9d24
</span></span><span style="display:flex;"><span>spec:	<span style="color:#75715e"># è¿™éƒ¨åˆ†æ˜¯Podçš„æœŸæœ›çŠ¶æ€</span>
</span></span><span style="display:flex;"><span>  containers:
</span></span><span style="display:flex;"><span>  - image: nigelpoulton/k8sbook:latest
</span></span><span style="display:flex;"><span>    imagePullPolicy: Always
</span></span><span style="display:flex;"><span>    name: hello-ctr
</span></span><span style="display:flex;"><span>    ports:
</span></span><span style="display:flex;"><span>    - containerPort: <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>      protocol: TCP
</span></span><span style="display:flex;"><span>    resources: <span style="color:#f92672">{}</span>
</span></span><span style="display:flex;"><span>    terminationMessagePath: /dev/termination-log
</span></span><span style="display:flex;"><span>    terminationMessagePolicy: File
</span></span><span style="display:flex;"><span>    volumeMounts:
</span></span><span style="display:flex;"><span>    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
</span></span><span style="display:flex;"><span>      name: kube-api-access-5kwmz
</span></span><span style="display:flex;"><span>      readOnly: true
</span></span><span style="display:flex;"><span>  dnsPolicy: ClusterFirst
</span></span><span style="display:flex;"><span>  enableServiceLinks: true
</span></span><span style="display:flex;"><span>  nodeName: lzl-c
</span></span><span style="display:flex;"><span>  preemptionPolicy: PreemptLowerPriority
</span></span><span style="display:flex;"><span>  priority: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  restartPolicy: Always
</span></span><span style="display:flex;"><span>  schedulerName: default-scheduler
</span></span><span style="display:flex;"><span>  securityContext: <span style="color:#f92672">{}</span>
</span></span><span style="display:flex;"><span>  serviceAccount: default
</span></span><span style="display:flex;"><span>  serviceAccountName: default
</span></span><span style="display:flex;"><span>  terminationGracePeriodSeconds: <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>  tolerations:
</span></span><span style="display:flex;"><span>  - effect: NoExecute
</span></span><span style="display:flex;"><span>    key: node.kubernetes.io/not-ready
</span></span><span style="display:flex;"><span>    operator: Exists
</span></span><span style="display:flex;"><span>    tolerationSeconds: <span style="color:#ae81ff">300</span>
</span></span><span style="display:flex;"><span>  - effect: NoExecute
</span></span><span style="display:flex;"><span>    key: node.kubernetes.io/unreachable
</span></span><span style="display:flex;"><span>    operator: Exists
</span></span><span style="display:flex;"><span>    tolerationSeconds: <span style="color:#ae81ff">300</span>
</span></span><span style="display:flex;"><span>  volumes:
</span></span><span style="display:flex;"><span>  - name: kube-api-access-5kwmz
</span></span><span style="display:flex;"><span>    projected:
</span></span><span style="display:flex;"><span>      defaultMode: <span style="color:#ae81ff">420</span>
</span></span><span style="display:flex;"><span>      sources:
</span></span><span style="display:flex;"><span>      - serviceAccountToken:
</span></span><span style="display:flex;"><span>          expirationSeconds: <span style="color:#ae81ff">3607</span>
</span></span><span style="display:flex;"><span>          path: token
</span></span><span style="display:flex;"><span>      - configMap:
</span></span><span style="display:flex;"><span>          items:
</span></span><span style="display:flex;"><span>          - key: ca.crt
</span></span><span style="display:flex;"><span>            path: ca.crt
</span></span><span style="display:flex;"><span>          name: kube-root-ca.crt
</span></span><span style="display:flex;"><span>      - downwardAPI:
</span></span><span style="display:flex;"><span>          items:
</span></span><span style="display:flex;"><span>          - fieldRef:
</span></span><span style="display:flex;"><span>              apiVersion: v1
</span></span><span style="display:flex;"><span>              fieldPath: metadata.namespace
</span></span><span style="display:flex;"><span>            path: namespace
</span></span><span style="display:flex;"><span>status:	<span style="color:#75715e"># è¿™éƒ¨åˆ†æ˜¯Podçš„å½“å‰çŠ¶æ€</span>
</span></span><span style="display:flex;"><span>  conditions:
</span></span><span style="display:flex;"><span>  - lastProbeTime: null
</span></span><span style="display:flex;"><span>    lastTransitionTime: <span style="color:#e6db74">&#34;2022-01-19T10:26:35Z&#34;</span>
</span></span><span style="display:flex;"><span>    status: <span style="color:#e6db74">&#34;True&#34;</span>
</span></span><span style="display:flex;"><span>    type: Initialized
</span></span><span style="display:flex;"><span>  - lastProbeTime: null
</span></span><span style="display:flex;"><span>    lastTransitionTime: <span style="color:#e6db74">&#34;2022-01-19T10:26:58Z&#34;</span>
</span></span><span style="display:flex;"><span>    status: <span style="color:#e6db74">&#34;True&#34;</span>
</span></span><span style="display:flex;"><span>    type: Ready
</span></span><span style="display:flex;"><span>  - lastProbeTime: null
</span></span><span style="display:flex;"><span>    lastTransitionTime: <span style="color:#e6db74">&#34;2022-01-19T10:26:58Z&#34;</span>
</span></span><span style="display:flex;"><span>    status: <span style="color:#e6db74">&#34;True&#34;</span>
</span></span><span style="display:flex;"><span>    type: ContainersReady
</span></span><span style="display:flex;"><span>  - lastProbeTime: null
</span></span><span style="display:flex;"><span>    lastTransitionTime: <span style="color:#e6db74">&#34;2022-01-19T10:26:35Z&#34;</span>
</span></span><span style="display:flex;"><span>    status: <span style="color:#e6db74">&#34;True&#34;</span>
</span></span><span style="display:flex;"><span>    type: PodScheduled
</span></span><span style="display:flex;"><span>  containerStatuses:
</span></span><span style="display:flex;"><span>  - containerID: docker://a7cc9815fc32e3f99f57553c6c28aa264576dbc3076784fee485a4306a1f4fcb
</span></span><span style="display:flex;"><span>    image: nigelpoulton/k8sbook:latest
</span></span><span style="display:flex;"><span>    imageID: docker-pullable://nigelpoulton/k8sbook@sha256:a983a96a85151320cd6ad0cd9fda3b725a743ed642e58b0597285c6bcb46c90f
</span></span><span style="display:flex;"><span>    lastState: <span style="color:#f92672">{}</span>
</span></span><span style="display:flex;"><span>    name: hello-ctr
</span></span><span style="display:flex;"><span>    ready: true
</span></span><span style="display:flex;"><span>    restartCount: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    started: true
</span></span><span style="display:flex;"><span>    state:
</span></span><span style="display:flex;"><span>      running:
</span></span><span style="display:flex;"><span>        startedAt: <span style="color:#e6db74">&#34;2022-01-19T10:26:58Z&#34;</span>
</span></span><span style="display:flex;"><span>  hostIP: 192.168.230.13
</span></span><span style="display:flex;"><span>  phase: Running
</span></span><span style="display:flex;"><span>  podIP: 10.5.2.2
</span></span><span style="display:flex;"><span>  podIPs:
</span></span><span style="display:flex;"><span>  - ip: 10.5.2.2
</span></span><span style="display:flex;"><span>  qosClass: BestEffort
</span></span><span style="display:flex;"><span>  startTime: <span style="color:#e6db74">&#34;2022-01-19T10:26:35Z&#34;</span>
</span></span></code></pre></div><ul>
<li><code>kubectl describe Pods hello-pod</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl describe Pods hello-pod
</span></span><span style="display:flex;"><span>Name:         hello-pod
</span></span><span style="display:flex;"><span>Namespace:    default
</span></span><span style="display:flex;"><span>Priority:     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Node:         lzl-c/192.168.230.13
</span></span><span style="display:flex;"><span>Start Time:   Wed, <span style="color:#ae81ff">19</span> Jan <span style="color:#ae81ff">2022</span> 18:26:35 +0800
</span></span><span style="display:flex;"><span>Labels:       version<span style="color:#f92672">=</span>v1
</span></span><span style="display:flex;"><span>              zone<span style="color:#f92672">=</span>prod
</span></span><span style="display:flex;"><span>Annotations:  &lt;none&gt;
</span></span><span style="display:flex;"><span>Status:       Running
</span></span><span style="display:flex;"><span>IP:           10.5.2.2
</span></span><span style="display:flex;"><span>IPs:
</span></span><span style="display:flex;"><span>  IP:  10.5.2.2
</span></span><span style="display:flex;"><span>Containers:
</span></span><span style="display:flex;"><span>  hello-ctr:
</span></span><span style="display:flex;"><span>    Container ID:   docker://a7cc9815fc32e3f99f57553c6c28aa264576dbc3076784fee485a4306a1f4fcb
</span></span><span style="display:flex;"><span>    Image:          nigelpoulton/k8sbook:latest
</span></span><span style="display:flex;"><span>    Image ID:       docker-pullable://nigelpoulton/k8sbook@sha256:a983a96a85151320cd6ad0cd9fda3b725a743ed642e58b0597285c6bcb46c90f
</span></span><span style="display:flex;"><span>    Port:           8080/TCP
</span></span><span style="display:flex;"><span>    Host Port:      0/TCP
</span></span><span style="display:flex;"><span>    State:          Running
</span></span><span style="display:flex;"><span>      Started:      Wed, <span style="color:#ae81ff">19</span> Jan <span style="color:#ae81ff">2022</span> 18:26:58 +0800
</span></span><span style="display:flex;"><span>    Ready:          True
</span></span><span style="display:flex;"><span>    Restart Count:  <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    Environment:    &lt;none&gt;
</span></span><span style="display:flex;"><span>    Mounts:
</span></span><span style="display:flex;"><span>      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-5kwmz <span style="color:#f92672">(</span>ro<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Conditions:
</span></span><span style="display:flex;"><span>  Type              Status
</span></span><span style="display:flex;"><span>  Initialized       True 
</span></span><span style="display:flex;"><span>  Ready             True 
</span></span><span style="display:flex;"><span>  ContainersReady   True 
</span></span><span style="display:flex;"><span>  PodScheduled      True 
</span></span><span style="display:flex;"><span>Volumes:
</span></span><span style="display:flex;"><span>  kube-api-access-5kwmz:
</span></span><span style="display:flex;"><span>    Type:                    Projected <span style="color:#f92672">(</span>a volume that contains injected data from multiple sources<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    TokenExpirationSeconds:  <span style="color:#ae81ff">3607</span>
</span></span><span style="display:flex;"><span>    ConfigMapName:           kube-root-ca.crt
</span></span><span style="display:flex;"><span>    ConfigMapOptional:       &lt;nil&gt;
</span></span><span style="display:flex;"><span>    DownwardAPI:             true
</span></span><span style="display:flex;"><span>QoS Class:                   BestEffort
</span></span><span style="display:flex;"><span>Node-Selectors:              &lt;none&gt;
</span></span><span style="display:flex;"><span>Tolerations:                 node.kubernetes.io/not-ready:NoExecute op<span style="color:#f92672">=</span>Exists <span style="color:#66d9ef">for</span> 300s
</span></span><span style="display:flex;"><span>                             node.kubernetes.io/unreachable:NoExecute op<span style="color:#f92672">=</span>Exists <span style="color:#66d9ef">for</span> 300s
</span></span><span style="display:flex;"><span>Events:	<span style="color:#75715e"># Podç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€äº›é‡è¦äº‹ä»¶</span>
</span></span><span style="display:flex;"><span>  Type    Reason     Age    From               Message
</span></span><span style="display:flex;"><span>  ----    ------     ----   ----               -------
</span></span><span style="display:flex;"><span>  Normal  Scheduled  6m56s  default-scheduler  Successfully assigned default/hello-pod to lzl-c
</span></span><span style="display:flex;"><span>  Normal  Pulling    6m54s  kubelet            Pulling image <span style="color:#e6db74">&#34;nigelpoulton/k8sbook:latest&#34;</span>
</span></span><span style="display:flex;"><span>  Normal  Pulled     6m33s  kubelet            Successfully pulled image <span style="color:#e6db74">&#34;nigelpoulton/k8sbook:latest&#34;</span> in 21.212884013s
</span></span><span style="display:flex;"><span>  Normal  Created    6m33s  kubelet            Created container hello-ctr
</span></span><span style="display:flex;"><span>  Normal  Started    6m33s  kubelet            Started container hello-ctr
</span></span></code></pre></div><h3 id="è¿›å…¥podä¸­çš„å®¹å™¨å†…éƒ¨">è¿›å…¥Podä¸­çš„å®¹å™¨å†…éƒ¨</h3>
<ul>
<li>è¿˜å¯ä»¥è¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤ï¼Œæ¥æŸ¥çœ‹Podçš„ä¿¡æ¯ï¼š<code>kubectl exec hello-pod -- ps aux</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl exec hello-pod -- ps aux
</span></span><span style="display:flex;"><span>PID   USER     TIME  COMMAND
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">1</span> root      0:00 node ./app.js
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">13</span> root      0:00 ps aux
</span></span></code></pre></div><ul>
<li>ç™»å½•åˆ°è¿è¡Œå®¹å™¨å†…éƒ¨ï¼š<code>kubectl exec -it hello-pod -- sh</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl exec -it hello-pod -- sh
</span></span><span style="display:flex;"><span>/src <span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>Dockerfile         app.js             package-lock.json  views
</span></span><span style="display:flex;"><span>README.md          node_modules       package.json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/src <span style="color:#75715e"># exit</span>
</span></span><span style="display:flex;"><span>root@lzl:/home/lzl# 
</span></span></code></pre></div><p>å½“Podä¸­æœ‰å¤šä¸ªå®¹å™¨æ—¶ï¼Œéœ€è¦ä½¿ç”¨<code>--container</code>å‚æ•°æŒ‡å®šæƒ³è¦åˆ›å»ºäº¤äº’å¼ä¼šè¯çš„å®¹å™¨ï¼Œä¸æŒ‡å®šçš„è¯é»˜è®¤æ˜¯ç¬¬ä¸€ä¸ªå®¹å™¨ã€‚</p>
<p>ä½¿ç”¨<code>exit</code>é€€å‡ºå½“å‰å®¹å™¨ã€‚</p>
<h3 id="åˆ é™¤pod">åˆ é™¤Pod</h3>
<ul>
<li><code>kubectl delete -f pod.yaml</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl delete -f ./WorkSpace/k8s/pod/Pod.yml 
</span></span><span style="display:flex;"><span>pod <span style="color:#e6db74">&#34;hello-pod&#34;</span> deleted
</span></span><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl get Pods
</span></span><span style="display:flex;"><span>No resources found in default namespace.
</span></span></code></pre></div><h2 id="ä½¿ç”¨deploymentéƒ¨ç½²pod">ä½¿ç”¨Deploymentéƒ¨ç½²Pod</h2>
<p>Deploymentä¸ºKuberneteså¸¦æ¥è‡ªæ„ˆã€è‡ªåŠ¨æ‰©ç¼©å®¹ã€æ»šåŠ¨å‡çº§ä»¥åŠåŸºäºç‰ˆæœ¬çš„å›æ»šçš„èƒ½åŠ›ã€‚å®é™…ä¸Šåœ¨åº•å±‚Deploymentæ˜¯ä½¿ç”¨çš„ReplicaSetæ¥å®Œæˆçš„ï¼Œå¯ä»¥ç†è§£ä¸ºï¼ŒDeploymentç®¡ç†ReplicaSetï¼Œè€ŒReplicaSetç®¡ç†Podã€‚</p>
<h3 id="éƒ¨ç½²deployment">éƒ¨ç½²Deployment</h3>
<p>æœ¬æ¬¡éƒ¨ç½²çš„æ–‡ä»¶<code>deploy.yaml</code>å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>apiVersion: apps/v1
</span></span><span style="display:flex;"><span>kind: Deployment
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>  name: hello-deploy
</span></span><span style="display:flex;"><span>spec:                       <span style="color:#75715e"># specä¸‹çš„å†…å®¹éƒ½ä¸Podæœ‰å…³</span>
</span></span><span style="display:flex;"><span>  replicas: <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>  selector:                 <span style="color:#75715e"># è¡¨ç¤ºè¯¥Deploymentæ‰€ç®¡ç†çš„Podå¿…é¡»è¦æœ‰çš„æ ‡ç­¾</span>
</span></span><span style="display:flex;"><span>    matchLabels:
</span></span><span style="display:flex;"><span>      app: hello-world
</span></span><span style="display:flex;"><span>  minReadySeconds: <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>  strategy:                 <span style="color:#75715e"># è¡¨ç¤ºæ›´æ–°ç­–ç•¥</span>
</span></span><span style="display:flex;"><span>    type: RollingUpdate
</span></span><span style="display:flex;"><span>    rollingUpdate:
</span></span><span style="display:flex;"><span>      maxUnavailable: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      maxSurge: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  template:                 <span style="color:#75715e"># æ‰€ç®¡ç†çš„Podçš„æ¨¡æ¿ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªå®¹å™¨</span>
</span></span><span style="display:flex;"><span>    metadata:
</span></span><span style="display:flex;"><span>      labels:
</span></span><span style="display:flex;"><span>        app: hello-world
</span></span><span style="display:flex;"><span>    spec:
</span></span><span style="display:flex;"><span>      containers:
</span></span><span style="display:flex;"><span>      - name: hello-pod
</span></span><span style="display:flex;"><span>        image: nigelpoulton/k8sbook:latest
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>        - containerPort: <span style="color:#ae81ff">8080</span>
</span></span></code></pre></div><p>è¿›è¡Œéƒ¨ç½²ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl apply -f ./WorkSpace/k8s/deployment/deploy.yaml 
</span></span><span style="display:flex;"><span>deployment.apps/hello-deploy created
</span></span></code></pre></div><h3 id="æŸ¥çœ‹deployment">æŸ¥çœ‹Deployment</h3>
<ul>
<li>ä½¿ç”¨<code>kubectl get</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl get deploy hello-deploy
</span></span><span style="display:flex;"><span>NAME           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>hello-deploy   10/10   <span style="color:#ae81ff">10</span>           <span style="color:#ae81ff">10</span>          2m29s
</span></span></code></pre></div><ul>
<li>ä½¿ç”¨<code>kubectl describe</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl describe deploy hello-deploy
</span></span><span style="display:flex;"><span>Name:                   hello-deploy
</span></span><span style="display:flex;"><span>Namespace:              default
</span></span><span style="display:flex;"><span>CreationTimestamp:      Wed, <span style="color:#ae81ff">19</span> Jan <span style="color:#ae81ff">2022</span> 19:18:16 +0800
</span></span><span style="display:flex;"><span>Labels:                 &lt;none&gt;
</span></span><span style="display:flex;"><span>Annotations:            deployment.kubernetes.io/revision: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Selector:               app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>Replicas:               <span style="color:#ae81ff">10</span> desired | <span style="color:#ae81ff">10</span> updated | <span style="color:#ae81ff">10</span> total | <span style="color:#ae81ff">10</span> available | <span style="color:#ae81ff">0</span> unavailable
</span></span><span style="display:flex;"><span>StrategyType:           RollingUpdate
</span></span><span style="display:flex;"><span>MinReadySeconds:        <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>RollingUpdateStrategy:  <span style="color:#ae81ff">1</span> max unavailable, <span style="color:#ae81ff">1</span> max surge
</span></span><span style="display:flex;"><span>Pod Template:
</span></span><span style="display:flex;"><span>  Labels:  app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>  Containers:
</span></span><span style="display:flex;"><span>   hello-pod:
</span></span><span style="display:flex;"><span>    Image:        nigelpoulton/k8sbook:latest
</span></span><span style="display:flex;"><span>    Port:         8080/TCP
</span></span><span style="display:flex;"><span>    Host Port:    0/TCP
</span></span><span style="display:flex;"><span>    Environment:  &lt;none&gt;
</span></span><span style="display:flex;"><span>    Mounts:       &lt;none&gt;
</span></span><span style="display:flex;"><span>  Volumes:        &lt;none&gt;
</span></span><span style="display:flex;"><span>Conditions:
</span></span><span style="display:flex;"><span>  Type           Status  Reason
</span></span><span style="display:flex;"><span>  ----           ------  ------
</span></span><span style="display:flex;"><span>  Available      True    MinimumReplicasAvailable
</span></span><span style="display:flex;"><span>  Progressing    True    NewReplicaSetAvailable
</span></span><span style="display:flex;"><span>OldReplicaSets:  &lt;none&gt;
</span></span><span style="display:flex;"><span>NewReplicaSet:   hello-deploy-65cbc9474c <span style="color:#f92672">(</span>10/10 replicas created<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Events:
</span></span><span style="display:flex;"><span>  Type    Reason             Age    From                   Message
</span></span><span style="display:flex;"><span>  ----    ------             ----   ----                   -------
</span></span><span style="display:flex;"><span>  Normal  ScalingReplicaSet  4m17s  deployment-controller  Scaled up replica set hello-deploy-65cbc9474c to <span style="color:#ae81ff">10</span>
</span></span></code></pre></div><p>å¯ä»¥ä½¿ç”¨<code>kubectl get rs</code>æ¥æŸ¥çœ‹ReplicaSetçš„çŠ¶æ€ï¼Œä»¥åŠ<code>kubectl describe rs</code>æ¥æŸ¥çœ‹å…¶è¯¦ç»†ä¿¡æ¯</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl get rs
</span></span><span style="display:flex;"><span>NAME                      DESIRED   CURRENT   READY   AGE
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c   <span style="color:#ae81ff">10</span>        <span style="color:#ae81ff">10</span>        <span style="color:#ae81ff">10</span>      5m55s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl describe rs hello-deploy-65cbc9474c
</span></span><span style="display:flex;"><span>Name:           hello-deploy-65cbc9474c
</span></span><span style="display:flex;"><span>Namespace:      default
</span></span><span style="display:flex;"><span>Selector:       app<span style="color:#f92672">=</span>hello-world,pod-template-hash<span style="color:#f92672">=</span>65cbc9474c
</span></span><span style="display:flex;"><span>Labels:         app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>                pod-template-hash<span style="color:#f92672">=</span>65cbc9474c
</span></span><span style="display:flex;"><span>Annotations:    deployment.kubernetes.io/desired-replicas: <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>                deployment.kubernetes.io/max-replicas: <span style="color:#ae81ff">11</span>
</span></span><span style="display:flex;"><span>                deployment.kubernetes.io/revision: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Controlled By:  Deployment/hello-deploy
</span></span><span style="display:flex;"><span>Replicas:       <span style="color:#ae81ff">10</span> current / <span style="color:#ae81ff">10</span> desired
</span></span><span style="display:flex;"><span>Pods Status:    <span style="color:#ae81ff">10</span> Running / <span style="color:#ae81ff">0</span> Waiting / <span style="color:#ae81ff">0</span> Succeeded / <span style="color:#ae81ff">0</span> Failed
</span></span><span style="display:flex;"><span>Pod Template:
</span></span><span style="display:flex;"><span>  Labels:  app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>           pod-template-hash<span style="color:#f92672">=</span>65cbc9474c
</span></span><span style="display:flex;"><span>  Containers:
</span></span><span style="display:flex;"><span>   hello-pod:
</span></span><span style="display:flex;"><span>    Image:        nigelpoulton/k8sbook:latest
</span></span><span style="display:flex;"><span>    Port:         8080/TCP
</span></span><span style="display:flex;"><span>    Host Port:    0/TCP
</span></span><span style="display:flex;"><span>    Environment:  &lt;none&gt;
</span></span><span style="display:flex;"><span>    Mounts:       &lt;none&gt;
</span></span><span style="display:flex;"><span>  Volumes:        &lt;none&gt;
</span></span><span style="display:flex;"><span>Events:
</span></span><span style="display:flex;"><span>  Type    Reason            Age    From                   Message
</span></span><span style="display:flex;"><span>  ----    ------            ----   ----                   -------
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-plhwm
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-8fdqs
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-dlv5g
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-x2ddb
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-qgffd
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-67nlw
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-gg4r2
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-b2v4v
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  Created pod: hello-deploy-65cbc9474c-vbzrd
</span></span><span style="display:flex;"><span>  Normal  SuccessfulCreate  7m39s  replicaset-controller  <span style="color:#f92672">(</span>combined from similar events<span style="color:#f92672">)</span>: Created pod: hello-deploy-65cbc9474c-pjwsh
</span></span></code></pre></div><h3 id="è®¿é—®éƒ¨ç½²çš„åº”ç”¨">è®¿é—®éƒ¨ç½²çš„åº”ç”¨</h3>
<p>å¯¹äºPodæ¥è¯´ï¼Œå…¶IPä¼šç”±äºé”€æ¯æˆ–è€…é‡å»ºè€Œæ”¹å˜ï¼ŒPodçš„IPæ˜¯ä¸€ä¸ªå˜é‡ï¼Œé€šå¸¸ä¸èƒ½ç›´æ¥ä½¿ç”¨Podçš„IPä½œä¸ºé€šè®¯ã€‚åœ¨K8sä¸­ï¼ŒKubernetes Serviceå¯¹è±¡åˆ™è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œå®ƒä¸ºä¸€ç»„Podæä¾›äº†ä¸€ä¸ªå›ºå®šçš„DNSåŸŸåå’ŒIPåœ°å€ã€‚</p>
<p>ä¸‹é¢å®šä¹‰ä¸€ä¸ªServiceä¸ä¸Šè¿°Podè¿›è¡ŒååŒå·¥ä½œã€‚</p>
<p><code>svc.yaml</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">hello-svc</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">hello-world</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">NodePort</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nodePort</span>: <span style="color:#ae81ff">30001</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">hello-world</span>
</span></span></code></pre></div><p>éƒ¨ç½²Serviceï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl apply -f ./WorkSpace/k8s/service/svc.yaml
</span></span><span style="display:flex;"><span>service/hello-svc created
</span></span></code></pre></div><p>è¿™æ ·æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è®¿é—®è¯¥åº”ç”¨ï¼š</p>
<ol>
<li>åœ¨é›†ç¾¤å†…éƒ¨ä½¿ç”¨DNSåç§°<code>hello-svc</code>å’Œç«¯å£<code>8080</code>è®¿é—®</li>
<li>åœ¨é›†ç¾¤å¤–éƒ¨é€šè¿‡é›†ç¾¤çš„ä»»æ„èŠ‚ç‚¹å’Œç«¯å£å·<code>30001</code>è®¿é—®</li>
</ol>
<p>é¦–å…ˆæˆ‘ä»¬æŸ¥çœ‹æˆ‘ä»¬åˆšéƒ¨ç½²çš„è¿™10ä¸ªPodå®ä¾‹çš„å…·ä½“ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl get pods -l app<span style="color:#f92672">=</span>hello-world -o wide
</span></span><span style="display:flex;"><span>NAME                            READY   STATUS    RESTARTS   AGE   IP         NODE    NOMINATED NODE   READINESS GATES
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-67nlw   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.1.4   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-8fdqs   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.2.6   lzl-c   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-b2v4v   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.2.4   lzl-c   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-dlv5g   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.2.7   lzl-c   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-gg4r2   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.2.5   lzl-c   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-pjwsh   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.2.3   lzl-c   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-plhwm   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.1.5   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-qgffd   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.1.2   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-vbzrd   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.1.6   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-x2ddb   1/1     Running   <span style="color:#ae81ff">0</span>          72m   10.5.1.3   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><p>k8sè‡ªåŠ¨ä¸ºè¿™äº›Podåˆ†é…äº†IPåœ°å€ã€‚</p>
<blockquote>
<p>å¼•è‡ªå®˜æ–¹æ–‡æ¡£ï¼š</p>
<p>Kubernetes Service ä»é€»è¾‘ä¸Šå®šä¹‰äº†è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„ä¸€ç»„ Podï¼Œè¿™äº› Pod æä¾›äº†ç›¸åŒçš„åŠŸèƒ½ã€‚ å½“æ¯ä¸ª Service åˆ›å»ºæ—¶ï¼Œä¼šè¢«åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ IP åœ°å€ï¼ˆä¹Ÿç§°ä¸º clusterIPï¼‰ã€‚ è¿™ä¸ª IP åœ°å€ä¸ä¸€ä¸ª Service çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåœ¨ä¸€èµ·ï¼Œå½“ Service å­˜åœ¨çš„æ—¶å€™å®ƒä¹Ÿä¸ä¼šæ”¹å˜ã€‚ å¯ä»¥é…ç½® Pod ä½¿å®ƒä¸ Service è¿›è¡Œé€šä¿¡ï¼ŒPod çŸ¥é“ä¸ Service é€šä¿¡å°†è¢«è‡ªåŠ¨åœ°è´Ÿè½½å‡è¡¡åˆ°è¯¥ Service ä¸­çš„æŸäº› Pod ä¸Šã€‚</p>
</blockquote>
<p>æˆ‘ä»¬æŸ¥çœ‹åˆ›å»ºçš„Serviceçš„ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl get svc hello-svc
</span></span><span style="display:flex;"><span>NAME        TYPE       CLUSTER-IP       EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>          AGE
</span></span><span style="display:flex;"><span>hello-svc   NodePort   10.110.196.234   &lt;none&gt;        8080:30001/TCP   19m
</span></span><span style="display:flex;"><span>root@lzl:/home/lzl# kubectl describe svc hello-svc
</span></span><span style="display:flex;"><span>Name:                     hello-svc
</span></span><span style="display:flex;"><span>Namespace:                default
</span></span><span style="display:flex;"><span>Labels:                   app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>Annotations:              &lt;none&gt;
</span></span><span style="display:flex;"><span>Selector:                 app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>Type:                     NodePort
</span></span><span style="display:flex;"><span>IP Family Policy:         SingleStack
</span></span><span style="display:flex;"><span>IP Families:              IPv4
</span></span><span style="display:flex;"><span>IP:                       10.110.196.234
</span></span><span style="display:flex;"><span>IPs:                      10.110.196.234
</span></span><span style="display:flex;"><span>Port:                     &lt;unset&gt;  8080/TCP
</span></span><span style="display:flex;"><span>TargetPort:               8080/TCP
</span></span><span style="display:flex;"><span>NodePort:                 &lt;unset&gt;  30001/TCP
</span></span><span style="display:flex;"><span>Endpoints:                10.5.1.2:8080,10.5.1.3:8080,10.5.1.4:8080 + <span style="color:#ae81ff">7</span> more...
</span></span><span style="display:flex;"><span>Session Affinity:         None
</span></span><span style="display:flex;"><span>External Traffic Policy:  Cluster
</span></span><span style="display:flex;"><span>Events:                   &lt;none&gt;
</span></span></code></pre></div><p><strong>è¿™é‡Œæˆ‘é‡åˆ°äº†é›†ç¾¤å†…éƒ¨å’Œé›†ç¾¤å¤–éƒ¨éƒ½æ— æ³•è®¿é—®åº”ç”¨çš„æƒ…å†µ</strong></p>
<ul>
<li>é›†ç¾¤å†…éƒ¨æ— æ³•è®¿é—®
<ul>
<li>åœ¨Podè¿è¡Œçš„èŠ‚ç‚¹ä¸Šå¯ä»¥è®¿é—®ï¼Œä½†æ˜¯åœ¨é›†ç¾¤å…¶ä»–èŠ‚ç‚¹ä¸Šæ— æ³•è®¿é—®</li>
<li>æ— æ³•è®¿é—®Service</li>
</ul>
</li>
<li>é›†ç¾¤å¤–éƒ¨æ— æ³•è®¿é—®ï¼šå¯ä»¥é€šè¿‡è¿è¡ŒPodçš„ä¸»æœºåœ°å€è®¿é—®ï¼Œè€Œæ— æ³•é€šè¿‡æ²¡æœ‰è¿è¡ŒPodçš„é›†ç¾¤ä¸»æœºåœ°å€è¿›è¡Œè®¿é—®</li>
</ul>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆåœ¨ä¸‹ä¸€èŠ‚</p>
</blockquote>
<p>å°†é—®é¢˜è§£å†³åï¼Œæˆ‘ä»¬æ¥çœ‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get pods -o wide
</span></span><span style="display:flex;"><span>NAME                           READY   STATUS    RESTARTS        AGE   IP          NODE    NOMINATED NODE   READINESS GATES
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-2hp8j   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m20s ago<span style="color:#f92672">)</span>   39m   10.5.1.4    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-4lhld   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m20s ago<span style="color:#f92672">)</span>   38m   10.5.1.11   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-7pn94   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m20s ago<span style="color:#f92672">)</span>   35m   10.5.1.5    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-9d444   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m20s ago<span style="color:#f92672">)</span>   35m   10.5.1.3    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-lhx2j   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m20s ago<span style="color:#f92672">)</span>   37m   10.5.1.9    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-nwcp8   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m20s ago<span style="color:#f92672">)</span>   36m   10.5.1.2    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-prwwd   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m19s ago<span style="color:#f92672">)</span>   36m   10.5.1.7    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-rflnv   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m19s ago<span style="color:#f92672">)</span>   34m   10.5.1.6    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-tbpt2   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m19s ago<span style="color:#f92672">)</span>   37m   10.5.1.10   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-z88ct   1/1     Running   <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>8m19s ago<span style="color:#f92672">)</span>   39m   10.5.1.8    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get svc -o wide
</span></span><span style="display:flex;"><span>NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>          AGE   SELECTOR
</span></span><span style="display:flex;"><span>hello-svc    NodePort    10.101.13.201   &lt;none&gt;        8080:30001/TCP   18h   app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>kubernetes   ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP          18h   &lt;none&gt;
</span></span></code></pre></div><h4 id="ä»é›†ç¾¤å†…è®¿é—®">ä»é›†ç¾¤å†…è®¿é—®</h4>
<p>ä»¥æœåŠ¡å®ä¾‹<code>hello-deploy-59866ff45-2hp8j</code>ä¸ºä¾‹ï¼Œå…¶åœ°å€ä¸º<code>10.5.1.4:8080</code>ã€‚å› æ­¤ï¼Œåœ¨é›†ç¾¤å†…éƒ¨ä»»ä½•ä¸€å°æœºå™¨è®¿é—®è¯¥åœ°å€éƒ½å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªåº”ç”¨ã€‚</p>
<p>åŒæ ·çš„ï¼Œ<code>hello-svc</code>çš„åœ°å€æ˜¯<code>10.101.13.201:8080</code>ï¼ŒåŠ å…¥é›†ç¾¤çš„ä»»ä½•ä¸€å°ä¸»æœºéƒ½å¯ä»¥é€šè¿‡è¯¥åœ°å€è®¿é—®åˆ°åº”ç”¨ã€‚</p>
<p>**ç‰¹åˆ«çš„ï¼Œä¸Podçš„IPä¸åŒï¼ŒServiceçš„IPæ˜¯å›ºå®šä¸å˜çš„ï¼Œè€ŒPodçš„IPä¼šè·ŸéšDeploymentçš„æ›´æ–°ã€æ‰©ç¼©å®¹ç­‰æ“ä½œæ”¹å˜ã€‚**Serviceå®é™…ä¸Šç›¸å½“äºæ‰€æœ‰Podçš„ä¸€ä¸ªç½‘å…³ï¼Œå®ƒæœ‰å›ºå®šçš„IPåœ°å€ï¼Œå¹¶ä¸”å°†è¯·æ±‚Podçš„æµé‡è´Ÿè½½å‡è¡¡åˆ°ä¸åŒçš„Podä¸Šï¼Œå¹¶åœ¨Podåœ°å€æ”¹å˜æ—¶å®ŒæˆæœåŠ¡å‘ç°ã€‚</p>
<h4 id="ä»é›†ç¾¤å¤–è®¿é—®">ä»é›†ç¾¤å¤–è®¿é—®</h4>
<p>å¦‚æœåœ¨é›†ç¾¤å¤–ï¼Œé‚£ä¹ˆè®¿é—®é›†ç¾¤å†…çš„ä»»ä½•ä¸€å°ä¸»æœºçš„<code>30001</code>ç«¯å£éƒ½å¯ä»¥è¿æ¥åˆ°è¯¥åº”ç”¨ï¼Œå› ä¸ºå‰é¢<code>svc.yaml</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span> ports:
</span></span><span style="display:flex;"><span>  - port: <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>    nodePort: <span style="color:#ae81ff">30001</span>
</span></span><span style="display:flex;"><span>    protocol: TCP
</span></span></code></pre></div><p>å¸®æˆ‘ä»¬åšäº†é›†ç¾¤å†…åˆ°é›†ç¾¤å¤–çš„ç«¯å£æ˜ å°„ã€‚</p>
<p><img src="https://raw.githubusercontent.com/lizonglin313/MyPicGo/master/20220121163556.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="https://raw.githubusercontent.com/lizonglin313/MyPicGo/master/20220121163510.png"
	
	
	
	loading="lazy"
	
	
></p>
<h2 id="è§£å†³ç”±äºiptablesç‰ˆæœ¬å·®å¼‚å¯¼è‡´çš„k8sç½‘ç»œé—®é¢˜">è§£å†³ç”±äºiptablesç‰ˆæœ¬å·®å¼‚å¯¼è‡´çš„K8sç½‘ç»œé—®é¢˜</h2>
<p>å¦‚ä¸Šæ–‡ï¼Œæˆ‘æ˜¯ç”¨Ubuntu18.04æ­å»ºK8s1.22.4é›†ç¾¤ï¼Œåœ¨å¯åŠ¨Serviceåšåº”ç”¨ç½‘ç»œå…¥å£æ—¶ï¼Œå‡ºç°äº†ä¸Šè¿°é—®é¢˜ã€‚æ‰¾äº†å¾ˆä¹…çš„èµ„æ–™ä¹‹åè®¤ä¸ºæ˜¯k8s1.22.4åœ¨ä½¿ç”¨iptablesé…ç½®ç½‘ç»œè§„åˆ™æ—¶ç”±äºç‰ˆæœ¬è¾ƒæ–°ï¼Œå…¶ä½¿ç”¨çš„é…ç½®å‘½ä»¤åœ¨Ubuntu18.04ç‰ˆæœ¬ä¸Šçš„iptablesæ— æ³•è§£æï¼Œå¯¼è‡´ç½‘ç»œå‡ºç°é—®é¢˜ã€‚</p>
<ul>
<li><a class="link" href="https://bugs.launchpad.net/ubuntu/&#43;source/linux-meta-hwe-5.4/&#43;bug/1899690"  target="_blank" rel="noopener"
    >https://bugs.launchpad.net/ubuntu/+source/linux-meta-hwe-5.4/+bug/1899690</a></li>
</ul>
<p>æ‰€ä»¥æˆ‘å°†è™šæ‹Ÿæœºæ¢ä¸ºUbuntu20.04åï¼Œè¯¥é—®é¢˜å¾—åˆ°è§£å†³ã€‚ç”±æ­¤çœ‹å‡ºï¼ŒK8så¯¹äºç¯å¢ƒç‰ˆæœ¬ä¸€è‡´æ€§çš„è¦æ±‚è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p>
<h2 id="è§£å†³ç”±äºè™šæ‹ŸæœºæŒ‚èµ·æ¢å¤è™šæ‹Ÿæœºåé›†ç¾¤ç½‘ç»œå¼‚å¸¸çš„é—®é¢˜">è§£å†³ç”±äºè™šæ‹ŸæœºæŒ‚èµ·ï¼Œæ¢å¤è™šæ‹Ÿæœºåé›†ç¾¤ç½‘ç»œå¼‚å¸¸çš„é—®é¢˜</h2>
<p>åœ¨è™šæ‹ŸæœºæŒ‚èµ·ï¼Œå†æ¢å¤ä¹‹åï¼Œé›†ç¾¤ç½‘ç»œå‡ºç°äº†é—®é¢˜ï¼Œå…·ä½“è¡¨ç°åœ¨ï¼š</p>
<ol>
<li>æ— æ³•é€šè¿‡Podåœ°å€è®¿é—®åº”ç”¨</li>
<li>æ— æ³•é€šè¿‡Serviceåœ°å€è®¿é—®åº”ç”¨</li>
<li>é›†ç¾¤é—´Podæ— æ³•è”é€š</li>
</ol>
<p>åœ¨ä¸€ç¯‡åšæ–‡ä¸­æ‰¾åˆ°äº†è§£å†³æ–¹æ³•ï¼šhttps://blog.csdn.net/weixin_43293361/article/details/114731838</p>
<p>é¦–å…ˆï¼ŒæŸ¥çœ‹Master Nodeçš„ç½‘ç»œï¼Œå‘ç°åŸæœ¬çš„<code>cni0</code>å’Œ<code>flannel.1</code>ç½‘ç»œå‡ä¸å­˜åœ¨äº†ï¼š</p>
<p><img src="https://raw.githubusercontent.com/lizonglin313/MyPicGo/master/20220121164938.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ç„¶åæŸ¥çœ‹äº†Work Nodeçš„ç½‘ç»œï¼Œä¸Šè¿°ä¸¤ä¸ªç½‘ç»œä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ã€‚æ‰€ä»¥æŒ‰ç…§<a class="link" href="https://blog.csdn.net/weixin_43293361/article/details/114731838"  target="_blank" rel="noopener"
    >åšæ–‡</a>ç»™å‡ºçš„æ–¹æ³•ï¼š</p>
<p>1ï¼‰åœ¨Master Nodeåˆ é™¤flannelç½‘ç»œç»„ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl delete -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
</span></span></code></pre></div><p>2ï¼‰åœ¨Master Nodeå’ŒWork Nodeä¸Šé‡ç½®é›†ç¾¤ç½‘ç»œé…ç½®ï¼ˆé›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹ä¸Šï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>ifconfig cni0 down
</span></span><span style="display:flex;"><span>ip link delete cni0
</span></span><span style="display:flex;"><span>ifconfig flannel.1 down
</span></span><span style="display:flex;"><span>ip link delete flannel.1
</span></span><span style="display:flex;"><span>rm -rf /var/lib/cni/flannel/*
</span></span><span style="display:flex;"><span>rm -rf /var/lib/cni/networks/cbr0/*
</span></span><span style="display:flex;"><span>rm -rf /var/lib/cni/cache/*
</span></span><span style="display:flex;"><span>rm -f /etc/cni/net.d/*
</span></span><span style="display:flex;"><span>systemctl restart kubelet
</span></span><span style="display:flex;"><span>systemctl restart docker
</span></span><span style="display:flex;"><span>chmod a+w /var/run/docker.sock
</span></span></code></pre></div><p>3ï¼‰æœ€ååœ¨Master Nodeé‡æ–°å®‰è£…flannelç½‘ç»œç»„ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
</span></span></code></pre></div><p>4ï¼‰æŸ¥çœ‹é›†ç¾¤å„ä¸ªèŠ‚ç‚¹çš„ç½‘ç»œæƒ…å†µï¼Œ<code>cni0</code>å’Œ<code>flannel.1</code>ç½‘ç»œå‡æ­£å¸¸å‡ºç°ï¼Œç„¶åç­‰å¾…Deploymentçš„Podè‡ªæ„ˆï¼Œè¿™æ ·é›†ç¾¤ç½‘ç»œå°±å¯ä»¥æ­£å¸¸æ¢å¤ã€‚</p>
<h2 id="æ»šåŠ¨å‡çº§ä¸å›æ»š">æ»šåŠ¨å‡çº§ä¸å›æ»š</h2>
<h3 id="æ»šåŠ¨å‡çº§">æ»šåŠ¨å‡çº§</h3>
<p>åœ¨å‡çº§ä½¿ç”¨çš„<code>deploy.yaml</code>æ–‡ä»¶ä¸­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>apiVersion: apps/v1
</span></span><span style="display:flex;"><span>kind: Deployment
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>  name: hello-deploy
</span></span><span style="display:flex;"><span>spec:
</span></span><span style="display:flex;"><span>  replicas: <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>  selector:
</span></span><span style="display:flex;"><span>    matchLabels:
</span></span><span style="display:flex;"><span>      app: hello-world
</span></span><span style="display:flex;"><span>  minReadySeconds: <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>  strategy:
</span></span><span style="display:flex;"><span>    type: RollingUpdate	<span style="color:#75715e"># æ»šåŠ¨æ›´æ–°</span>
</span></span><span style="display:flex;"><span>    rollingUpdate:
</span></span><span style="display:flex;"><span>      maxUnavailable: 1	<span style="color:#75715e"># é›†ç¾¤ä¸­æœ€å¤šæœ‰ä¸€ä¸ªä¸å¯ç”¨Pod</span>
</span></span><span style="display:flex;"><span>      maxSurge: 1		<span style="color:#75715e"># é›†ç¾¤ä¸­Podæœ€å¤šè¶…è¿‡é¢„æœŸå€¼1ä¸ª</span>
</span></span><span style="display:flex;"><span>  template:
</span></span><span style="display:flex;"><span>    metadata:
</span></span><span style="display:flex;"><span>      labels:
</span></span><span style="display:flex;"><span>        app: hello-world
</span></span><span style="display:flex;"><span>    spec:
</span></span><span style="display:flex;"><span>      containers:
</span></span><span style="display:flex;"><span>      - name: hello-pod
</span></span><span style="display:flex;"><span>        image: nigelpoulton/k8sbook:edge	<span style="color:#75715e"># ä½¿ç”¨äº†å¦ä¸€ä¸ªç‰ˆæœ¬çš„é•œåƒ</span>
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>        - containerPort: <span style="color:#ae81ff">8080</span>
</span></span></code></pre></div><p>ä¸ä¸Šä¸€ä¸ª<code>deploy.yaml</code>ä¸åŒï¼Œè¿™é‡Œä½¿ç”¨äº†å¦ä¸€ä¸ªç‰ˆæœ¬çš„é•œåƒï¼Œæ›´æ–°ç­–ç•¥ç”±<code>strategy</code>ä¸‹çš„å†…å®¹å†³å®šã€‚</p>
<p>è¿›è¡Œæ»šåŠ¨å‡çº§ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl apply -f deploy.yaml --record
</span></span><span style="display:flex;"><span>Flag --record has been deprecated, --record will be removed in the future
</span></span><span style="display:flex;"><span>deployment.apps/hello-deploy configured
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl rollout status deployment hello-deploy
</span></span><span style="display:flex;"><span>Waiting <span style="color:#66d9ef">for</span> deployment <span style="color:#e6db74">&#34;hello-deploy&#34;</span> rollout to finish: <span style="color:#ae81ff">2</span> out of <span style="color:#ae81ff">10</span> new replicas have been updated...
</span></span><span style="display:flex;"><span>^Croot@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get deploy
</span></span><span style="display:flex;"><span>NAME           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>hello-deploy   10/10   <span style="color:#ae81ff">2</span>            <span style="color:#ae81ff">9</span>           17h
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get deploy
</span></span><span style="display:flex;"><span>NAME           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>hello-deploy   10/10   <span style="color:#ae81ff">3</span>            <span style="color:#ae81ff">9</span>           17h
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get deploy
</span></span><span style="display:flex;"><span>NAME           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>hello-deploy   9/10    <span style="color:#ae81ff">5</span>            <span style="color:#ae81ff">9</span>           17h
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚Docker Swarmä¸€æ ·ï¼Œåœ¨å‡çº§è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶å­˜åœ¨æ–°ç‰ˆæœ¬ä¸æ—§ç‰ˆæœ¬çš„åº”ç”¨ï¼Œç›´è‡³æ•´ä¸ªå‡çº§è¿‡ç¨‹ç»“æŸã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get deploy hello-deploy
</span></span><span style="display:flex;"><span>NAME           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>hello-deploy   10/10   <span style="color:#ae81ff">10</span>           <span style="color:#ae81ff">10</span>          17h
</span></span></code></pre></div><h3 id="å›æ»š">å›æ»š</h3>
<p>Kubernetesä¼šç»´æŠ¤Deploymentçš„ç‰ˆæœ¬å†å²è®°å½•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl rollout history deployment hello-deploy
</span></span><span style="display:flex;"><span>deployment.apps/hello-deploy 
</span></span><span style="display:flex;"><span>REVISION  CHANGE-CAUSE
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>         &lt;none&gt;
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>         kubectl apply --filename<span style="color:#f92672">=</span>deploy.yaml --record<span style="color:#f92672">=</span>true
</span></span></code></pre></div><p>å¯¹äºDeploymentä¾èµ–çš„ReplicaSetæ¥è¯´ï¼Œæ¯æ¬¡æ›´æ–°éƒ½ä¼šä¿ç•™æ—§ç‰ˆæœ¬çš„ReplicaSetåŒæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ReplicaSetï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get rs
</span></span><span style="display:flex;"><span>NAME                      DESIRED   CURRENT   READY   AGE
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45    <span style="color:#ae81ff">10</span>        <span style="color:#ae81ff">10</span>        <span style="color:#ae81ff">10</span>      158m
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c   <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>       20h
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl describe rs
</span></span><span style="display:flex;"><span>Name:           hello-deploy-59866ff45
</span></span><span style="display:flex;"><span>Namespace:      default
</span></span><span style="display:flex;"><span>Selector:       app<span style="color:#f92672">=</span>hello-world,pod-template-hash<span style="color:#f92672">=</span>59866ff45
</span></span><span style="display:flex;"><span>Labels:         app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>                pod-template-hash<span style="color:#f92672">=</span>59866ff45
</span></span><span style="display:flex;"><span>Annotations:    deployment.kubernetes.io/desired-replicas: <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>                deployment.kubernetes.io/max-replicas: <span style="color:#ae81ff">11</span>
</span></span><span style="display:flex;"><span>                deployment.kubernetes.io/revision: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>                kubernetes.io/change-cause: kubectl apply --filename<span style="color:#f92672">=</span>deploy.yaml --record<span style="color:#f92672">=</span>true
</span></span><span style="display:flex;"><span>Controlled By:  Deployment/hello-deploy
</span></span><span style="display:flex;"><span>Replicas:       <span style="color:#ae81ff">10</span> current / <span style="color:#ae81ff">10</span> desired
</span></span><span style="display:flex;"><span>Pods Status:    <span style="color:#ae81ff">10</span> Running / <span style="color:#ae81ff">0</span> Waiting / <span style="color:#ae81ff">0</span> Succeeded / <span style="color:#ae81ff">0</span> Failed
</span></span><span style="display:flex;"><span>Pod Template:
</span></span><span style="display:flex;"><span>  Labels:  app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>           pod-template-hash<span style="color:#f92672">=</span>59866ff45
</span></span><span style="display:flex;"><span>  Containers:
</span></span><span style="display:flex;"><span>   hello-pod:
</span></span><span style="display:flex;"><span>    Image:        nigelpoulton/k8sbook:edge
</span></span><span style="display:flex;"><span>    Port:         8080/TCP
</span></span><span style="display:flex;"><span>    Host Port:    0/TCP
</span></span><span style="display:flex;"><span>    Environment:  &lt;none&gt;
</span></span><span style="display:flex;"><span>    Mounts:       &lt;none&gt;
</span></span><span style="display:flex;"><span>  Volumes:        &lt;none&gt;
</span></span><span style="display:flex;"><span>Events:           &lt;none&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Name:           hello-deploy-65cbc9474c
</span></span><span style="display:flex;"><span>Namespace:      default
</span></span><span style="display:flex;"><span>Selector:       app<span style="color:#f92672">=</span>hello-world,pod-template-hash<span style="color:#f92672">=</span>65cbc9474c
</span></span><span style="display:flex;"><span>Labels:         app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>                pod-template-hash<span style="color:#f92672">=</span>65cbc9474c
</span></span><span style="display:flex;"><span>Annotations:    deployment.kubernetes.io/desired-replicas: <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>                deployment.kubernetes.io/max-replicas: <span style="color:#ae81ff">11</span>
</span></span><span style="display:flex;"><span>                deployment.kubernetes.io/revision: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Controlled By:  Deployment/hello-deploy
</span></span><span style="display:flex;"><span>Replicas:       <span style="color:#ae81ff">0</span> current / <span style="color:#ae81ff">0</span> desired
</span></span><span style="display:flex;"><span>Pods Status:    <span style="color:#ae81ff">0</span> Running / <span style="color:#ae81ff">0</span> Waiting / <span style="color:#ae81ff">0</span> Succeeded / <span style="color:#ae81ff">0</span> Failed
</span></span><span style="display:flex;"><span>Pod Template:
</span></span><span style="display:flex;"><span>  Labels:  app<span style="color:#f92672">=</span>hello-world
</span></span><span style="display:flex;"><span>           pod-template-hash<span style="color:#f92672">=</span>65cbc9474c
</span></span><span style="display:flex;"><span>  Containers:
</span></span><span style="display:flex;"><span>   hello-pod:
</span></span><span style="display:flex;"><span>    Image:        nigelpoulton/k8sbook:latest
</span></span><span style="display:flex;"><span>    Port:         8080/TCP
</span></span><span style="display:flex;"><span>    Host Port:    0/TCP
</span></span><span style="display:flex;"><span>    Environment:  &lt;none&gt;
</span></span><span style="display:flex;"><span>    Mounts:       &lt;none&gt;
</span></span><span style="display:flex;"><span>  Volumes:        &lt;none&gt;
</span></span><span style="display:flex;"><span>Events:           &lt;none&gt;
</span></span></code></pre></div><p>é€šè¿‡ReplicaSetçš„ä¿¡æ¯ï¼Œå¯ä»¥æ¸…æ¥šçš„çŸ¥é“ä¸¤ä¸ªReplicaSetæ‰€åšçš„æ“ä½œï¼Œå¹¶ä¸”ç”±äºæ—§ç‰ˆæœ¬ReplicaSetçš„å­˜åœ¨ï¼Œå›æ»šæ“ä½œå˜å¾—æ›´åŠ ç®€å•ã€‚ä¸‹é¢å°†åº”ç”¨å›æ»šåˆ°ç‰ˆæœ¬1ï¼ŒåŒæ—¶åˆ«å¿˜è®°å†æ›´æ–°ä¸€ä¸‹yamlæ–‡ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl rollout undo deployment hello-deploy --to-revision<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>deployment.apps/hello-deploy rolled back
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get pods -o wide
</span></span><span style="display:flex;"><span>NAME                            READY   STATUS              RESTARTS       AGE    IP          NODE    NOMINATED NODE   READINESS GATES
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-2hp8j    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   166m   10.5.1.4    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-4lhld    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   165m   10.5.1.11   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-7pn94    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   162m   10.5.1.5    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-9d444    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   162m   10.5.1.3    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-lhx2j    1/1     Terminating         <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   164m   10.5.1.9    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-nwcp8    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   163m   10.5.1.2    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-prwwd    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   163m   10.5.1.7    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-rflnv    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   161m   10.5.1.6    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-tbpt2    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   165m   10.5.1.10   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-z88ct    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>135m ago<span style="color:#f92672">)</span>   166m   10.5.1.8    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-98bh2   0/1     ContainerCreating   <span style="color:#ae81ff">0</span>              10s    &lt;none&gt;      lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-d4g24   0/1     ContainerCreating   <span style="color:#ae81ff">0</span>              10s    &lt;none&gt;      lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl rollout status deployment hello-deploy
</span></span><span style="display:flex;"><span>Waiting <span style="color:#66d9ef">for</span> deployment <span style="color:#e6db74">&#34;hello-deploy&#34;</span> rollout to finish: <span style="color:#ae81ff">2</span> out of <span style="color:#ae81ff">10</span> new replicas have been updated...
</span></span><span style="display:flex;"><span>^Croot@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get pods -o wide
</span></span><span style="display:flex;"><span>NAME                            READY   STATUS              RESTARTS       AGE    IP          NODE    NOMINATED NODE   READINESS GATES
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-2hp8j    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   167m   10.5.1.4    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-4lhld    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   166m   10.5.1.11   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-7pn94    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   163m   10.5.1.5    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-9d444    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   162m   10.5.1.3    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-nwcp8    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   164m   10.5.1.2    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-prwwd    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   164m   10.5.1.7    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-rflnv    1/1     Terminating         <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   162m   10.5.1.6    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-tbpt2    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   165m   10.5.1.10   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-59866ff45-z88ct    1/1     Running             <span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>136m ago<span style="color:#f92672">)</span>   167m   10.5.1.8    lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-98bh2   1/1     Running             <span style="color:#ae81ff">0</span>              47s    10.5.1.12   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-d4g24   0/1     ContainerCreating   <span style="color:#ae81ff">0</span>              47s    &lt;none&gt;      lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-kglhr   0/1     ContainerCreating   <span style="color:#ae81ff">0</span>              2s     &lt;none&gt;      lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl rollout status deployment hello-deploy
</span></span><span style="display:flex;"><span>Waiting <span style="color:#66d9ef">for</span> deployment <span style="color:#e6db74">&#34;hello-deploy&#34;</span> rollout to finish: <span style="color:#ae81ff">3</span> out of <span style="color:#ae81ff">10</span> new replicas have been updated...
</span></span><span style="display:flex;"><span>^<span style="color:#f92672">[[</span>AWaiting <span style="color:#66d9ef">for</span> deployment <span style="color:#e6db74">&#34;hello-deploy&#34;</span> rollout to finish: <span style="color:#ae81ff">3</span> out of <span style="color:#ae81ff">10</span> new replicas have been updated...
</span></span><span style="display:flex;"><span>^Croot@lzl-a:/home/lzl/WP/k8s/deploykubectl get deploy hello-deploy
</span></span><span style="display:flex;"><span>NAME           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>hello-deploy   10/10   <span style="color:#ae81ff">3</span>            <span style="color:#ae81ff">9</span>           20h
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get deploy hello-deploy
</span></span><span style="display:flex;"><span>NAME           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>hello-deploy   10/10   <span style="color:#ae81ff">10</span>           <span style="color:#ae81ff">10</span>          20h
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s/deploy# kubectl get pods -o wide
</span></span><span style="display:flex;"><span>NAME                            READY   STATUS    RESTARTS   AGE     IP          NODE    NOMINATED NODE   READINESS GATES
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-7jrwq   1/1     Running   <span style="color:#ae81ff">0</span>          4m32s   10.5.1.19   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-98bh2   1/1     Running   <span style="color:#ae81ff">0</span>          7m56s   10.5.1.12   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-d4g24   1/1     Running   <span style="color:#ae81ff">0</span>          7m56s   10.5.1.13   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-hkr5r   1/1     Running   <span style="color:#ae81ff">0</span>          6m39s   10.5.1.15   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-jdwsr   1/1     Running   <span style="color:#ae81ff">0</span>          3m29s   10.5.1.21   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-kglhr   1/1     Running   <span style="color:#ae81ff">0</span>          7m11s   10.5.1.14   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-n4mqz   1/1     Running   <span style="color:#ae81ff">0</span>          4m1s    10.5.1.20   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-p7zgs   1/1     Running   <span style="color:#ae81ff">0</span>          6m7s    10.5.1.16   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-rqtrg   1/1     Running   <span style="color:#ae81ff">0</span>          5m36s   10.5.1.17   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-xxk2n   1/1     Running   <span style="color:#ae81ff">0</span>          5m4s    10.5.1.18   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><p>å’Œæ»šåŠ¨å‡çº§ä¸€æ ·ï¼Œå›æ»šè¿‡ç¨‹ä¸­ä¹ŸåŒæ—¶å­˜åœ¨æ–°æ—§ç‰ˆæœ¬çš„åº”ç”¨ã€‚ç”±äºå›æ»šæ˜¯å‘½ä»¤æ“ä½œï¼Œæ²¡æœ‰ä½¿ç”¨åˆ°<code>deploy.yaml</code>æ–‡ä»¶ï¼Œå› æ­¤è¦æ³¨æ„åº”ç”¨ç‰ˆæœ¬ä¸éƒ¨ç½²æ–‡ä»¶ä¸­é•œåƒç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨æ›´æ”¹éƒ¨ç½²æ–‡ä»¶ã€‚</p>
<h2 id="åˆ é™¤deploymentå’Œservice">åˆ é™¤Deploymentå’ŒService</h2>
<p>ä¸å†ä½¿ç”¨è¯¥Serviceå’ŒPodæ—¶ï¼Œå°†è¿™ä¸¤ä¸ªå¯¹è±¡åˆ é™¤ï¼Œä½¿ç”¨å‘½ä»¤ï¼š<code>kubectl delete -f</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s# kubectl delete -f ./deploy/deploy.yaml 
</span></span><span style="display:flex;"><span>deployment.apps <span style="color:#e6db74">&#34;hello-deploy&#34;</span> deleted
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s# kubectl delete -f ./service/svc.yaml 
</span></span><span style="display:flex;"><span>service <span style="color:#e6db74">&#34;hello-svc&#34;</span> deleted
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s# kubectl get pods -o wide
</span></span><span style="display:flex;"><span>NAME                            READY   STATUS        RESTARTS   AGE     IP          NODE    NOMINATED NODE   READINESS GATES
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-7jrwq   1/1     Terminating   <span style="color:#ae81ff">0</span>          10m     10.5.1.19   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-98bh2   1/1     Terminating   <span style="color:#ae81ff">0</span>          13m     10.5.1.12   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-d4g24   1/1     Terminating   <span style="color:#ae81ff">0</span>          13m     10.5.1.13   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-hkr5r   1/1     Terminating   <span style="color:#ae81ff">0</span>          12m     10.5.1.15   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-jdwsr   1/1     Terminating   <span style="color:#ae81ff">0</span>          9m19s   10.5.1.21   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-kglhr   1/1     Terminating   <span style="color:#ae81ff">0</span>          13m     10.5.1.14   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-n4mqz   1/1     Terminating   <span style="color:#ae81ff">0</span>          9m51s   10.5.1.20   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-p7zgs   1/1     Terminating   <span style="color:#ae81ff">0</span>          11m     10.5.1.16   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-rqtrg   1/1     Terminating   <span style="color:#ae81ff">0</span>          11m     10.5.1.17   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>hello-deploy-65cbc9474c-xxk2n   1/1     Terminating   <span style="color:#ae81ff">0</span>          10m     10.5.1.18   lzl-b   &lt;none&gt;           &lt;none&gt;
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s# kubectl get svc -o wide
</span></span><span style="display:flex;"><span>NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>   AGE   SELECTOR
</span></span><span style="display:flex;"><span>kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   20h   &lt;none&gt;
</span></span><span style="display:flex;"><span>root@lzl-a:/home/lzl/WP/k8s# kubectl get pods -o wide
</span></span><span style="display:flex;"><span>No resources found in default namespace.
</span></span></code></pre></div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/kubernetes/">Kubernetes</a>
        
            <a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/">äº‘åŸç”Ÿ</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <script src="https://utteranc.es/client.js"
    repo="lizonglingo/lizonglingo.github.io"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
    </script>
</footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    

</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/%E6%90%AD%E5%BB%BA1%E4%B8%AAmaster%E8%8A%82%E7%82%B9%E5%92%8C2%E4%B8%AAwork%E8%8A%82%E7%82%B9%E7%9A%84%E9%9B%86%E7%BE%A4k8s%E5%AE%9E%E8%B7%B5-2/">
        
        

        <div class="article-details">
            <h2 class="article-title">æ­å»º1ä¸ªMasterèŠ‚ç‚¹å’Œ2ä¸ªWorkèŠ‚ç‚¹çš„é›†ç¾¤(k8så®è·µ-2)</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E7%AC%94%E8%AE%B0-showar-right-sizing-and-efficient-scheduling-of-microservices/">
        
        

        <div class="article-details">
            <h2 class="article-title">ç¬”è®° &gt; SHOWAR: Right-Sizing And Efficient Scheduling of Microservices</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E5%90%AF%E5%8A%A8k8s%E7%9A%84%E4%B8%BB%E8%8A%82%E7%82%B9k8s%E5%AE%9E%E8%B7%B5-1/">
        
        

        <div class="article-details">
            <h2 class="article-title">å¯åŠ¨k8sçš„ä¸»èŠ‚ç‚¹(k8så®è·µ-1)</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E7%AC%94%E8%AE%B0-service-level-fault-injection-testing/">
        
        

        <div class="article-details">
            <h2 class="article-title">ç¬”è®° &gt; Service-Level Fault Injection Testing</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3--kong/">
        
        

        <div class="article-details">
            <h2 class="article-title">å¾®æœåŠ¡ç½‘å…³--kong</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2018 - 
        
        2023 fmt.Println(&#34;Li Duo&#34;)
    </section>
    
    <section class="powerby">
        
            è‡ªè®¤ä¸ºæ˜¯å¹»è±¡æ³¢æ™®æ˜Ÿçš„æ¥å®¢ <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
